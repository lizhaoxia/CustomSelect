var esui={};esui.validator={},esui.validator.ValidityState=function(t){this.message=t.message,this.state=t.state},esui.validator.ValidityState.prototype={getMessage:function(){return this.message||""},setMessage:function(t){this.message=t,this.state=!!t},getState:function(){return!!this.state},setState:function(t){this.state=!!t}},esui.validator.Rule=function(){function t(t){this.name=t.name,this.check=t.check,this.errorMessage=t.errorMessage}var e={};return t.prototype={getName:function(){return this.name},checkValidity:function(t){var e=t.getValue(),i=this.check(e,t),n="";return i||(n=this.errorMessage.replace(/\x24\{([a-z0-9_-]+)\}/g,function(e,i){return t[i]||""})),new esui.validator.ValidityState({state:i,message:n})}},t.register=function(t,i){e[t]=i},t.get=function(t,i){var n=e[t];return n?new n(i):null},t}(),esui.validator.Validity=function(){this._states=[],this._customState=new esui.validator.ValidityState({state:!0}),this._stateMap={}},esui.validator.Validity.prototype={addState:function(t,e){e instanceof esui.validator.ValidityState&&(this._states.push(e),this._stateMap[t]=e)},getCustomMessage:function(){return this._customState.getMessage()},setCustomMessage:function(t){this._customState.setMessage(t)},getStateList:function(){var t=this._states.slice(0);return t.push(this._customState),t},isValid:function(){for(var t=this.getStateList(),e=t.length;e--;)if(!t[e].getState())return!1;return!0},getState:function(t){return this._stateMap[t]||null}},esui.validator.MaxLengthRule=function(t){t=t||{},t.errorMessage&&(this.errorMessage=t.errorMessage)},esui.validator.MaxLengthRule.prototype={errorMessage:"${title}长度不能超过${maxlength}个字符",getName:function(){return"maxlength"},check:function(t,e){var i=e.maxlength;return t.length<=i}},baidu.inherits(esui.validator.MaxLengthRule,esui.validator.Rule),esui.validator.Rule.register("maxlength",esui.validator.MaxLengthRule),esui.validator.RequiredRule=function(t){t=t||{},t.errorMessage&&(this.errorMessage=t.errorMessage)},esui.validator.RequiredRule.prototype={errorMessage:"${title}不能为空",getName:function(){return"required"},check:function(t){return t.length>0}},baidu.inherits(esui.validator.RequiredRule,esui.validator.Rule),esui.validator.Rule.register("required",esui.validator.RequiredRule),esui.validator.MaxValueRule=function(t){t=t||{},t.errorMessage&&(this.errorMessage=t.errorMessage)},esui.validator.MaxValueRule.prototype={errorMessage:"${title}不能大于${max}",getName:function(){return"max"},check:function(t,e){var i;return e.getValueAsNumber?(i=e.getValueAsNumber(),i<=e.max):!0}},baidu.inherits(esui.validator.MaxValueRule,esui.validator.Rule),esui.validator.Rule.register("max",esui.validator.MaxValueRule),esui.validator.MinValueRule=function(t){t=t||{},t.errorMessage&&(this.errorMessage=t.errorMessage)},esui.validator.MinValueRule.prototype={errorMessage:"${title}不能小于${max}",getName:function(){return"min"},check:function(t,e){var i;return e.getValueAsNumber?(i=e.getValueAsNumber(),i>=e.max):!0}},baidu.inherits(esui.validator.MinValueRule,esui.validator.Rule),esui.validator.Rule.register("min",esui.validator.MinValueRule),esui.validator.PatternRule=function(t){t=t||{},t.errorMessage&&(this.errorMessage=t.errorMessage)},esui.validator.PatternRule.prototype={errorMessage:"${title}不符合规则",getName:function(){return"pattern"},check:function(t,e){var i=e.pattern;return i&&"string"==typeof i&&(i=new RegExp(i)),i instanceof RegExp?i.test(t):!0}},baidu.inherits(esui.validator.PatternRule,esui.validator.Rule),esui.validator.Rule.register("pattern",esui.validator.PatternRule),esui.config={UI_ATTRIBUTE:"ui"},esui.util=function(){var t={},e={},i=0;return{init:function(t,e,i){e=e||{},t=t||document.body;var n,s,a,o,r,l,u,d,h,c,_,g,p,f=t.getElementsByTagName("*"),m=esui.config.UI_ATTRIBUTE||"ui",v=[],b={};for(c=0,_=f.length;_>c;c++)v.push(f[c]);for(c=0,_=v.length;_>c;c++)if(p=v[c],s=p.getAttribute(m)){for(n={},a=s.split(/;\s*/),o=a.length;o--;)u=a[o],u&&(d=u.split(/\s*:/),r=d[0],l=d[1],n[r]=l);n.main=p;var y=n.id;y||(y=esui.util.getGUID(),n.id=y),h=e[y];for(g in h)n[g]=n[g]||h[g];"function"==typeof i&&i(n),b[y]=esui.util.create(n.type,n),p.setAttribute(m,"")}return b},get:function(e){return t[e]||null},create:function(t,i){i=i||{};var n=e[t]||esui[t],s=i.id,a=null;return s&&n&&(a=new n(i),i.main&&a.render()),a},dispose:function(e){if(e){var i,n=e;"string"==typeof e&&(n=t[e]),n&&n instanceof esui.Control&&(i=n.id,n.__dispose(),delete t[i])}else for(var s in t)esui.util.dispose(s)},register:function(t,i){e[t]=i},validate:new Function,getControlByDom:function(t){if(t){var e;return(e=t.getAttribute("data-control"))?esui.util.get(e):null}},getControlsByContainer:function(t){for(var e,i=t.getElementsByTagName("*"),n=i.length,s=0,a=[];n>s;s++)e=i[s].getAttribute("data-control"),e&&a.push(esui.util.get(e));return a},setDisabledByContainer:function(t,e){for(var i,n=esui.util.getControlsByContainer(t),s=n.length;s--;)i=n[s],i instanceof esui.Control&&i.setDisabled(e)},construct:function(e){t[e.id]=e,e.__construct()},hasValue:function(t){return"undefined"!=typeof t&&null!==t},format:function(t,e){if(t=String(t),"undefined"!=typeof e){if("[object Object]"==Object.prototype.toString.call(e))return t.replace(/\$\{(.+?)\}/g,function(t,i){var n=e[i];return"function"==typeof n&&(n=n(i)),"undefined"==typeof n?"":n});var i=Array.prototype.slice.call(arguments,1),n=i.length;return t.replace(/\{(\d+)\}/g,function(t,e){return e=parseInt(e,10),e>=n?t:i[e]})}return t},getGUID:function(){return"_innerui_"+i++}}}(),baidu.on(window,"unload",function(){esui.util.dispose()}),esui.get=esui.util.get,esui.init=esui.util.init,esui.create=esui.util.create,esui.dispose=esui.util.dispose,esui.Control=function(t){this._state={},this.__initOptions(t),this.id||(this.id=esui.util.getGUID()),esui.util.construct(this)},esui.Control.prototype={render:function(){var t=this.main;this._isRendered||(!t.id&&(t.id=this.__getId()),t.setAttribute("data-control",this.id),baidu.addClass(t,this.__getClass()),this._autoState&&this.__initStateChanger(),this._isRendered=!0)},appendTo:function(t){t=t||document.body,t.appendChild(this.main),this.render()},disable:function(){this.addState("disabled"),this.disabled=!0},enable:function(){this.removeState("disabled"),this.disabled=!1},isDisabled:function(){return this.getState("disabled")},setDisabled:function(t){this[t?"disable":"enable"]()},addState:function(t){this._state[t]=1,baidu.addClass(this.main,this.__getClass(t))},removeState:function(t){delete this._state[t],baidu.removeClass(this.main,this.__getClass(t))},getState:function(t){return!!this._state[t]},dispose:function(){esui.util.dispose(this)},__construct:function(){this.main||(this.main=this.__createMain()),this._controlMap={}},__dispose:function(){var t=this._controlMap,e=this.main;if(t)for(var i in t)esui.util.dispose(t[i].id),delete t[i];this._controlMap=null,e&&(e.onclick=null,e.onmouseover=null,e.onmouseout=null,e.onmousedown=null,e.onmouseup=null),this.main=null},__initOptions:function(t){for(var e in t)this[e]=t[e]},__initOption:function(t,e,i){var n=esui.util.hasValue;n(this[t])||("string"==typeof i&&(this[t]=this.constructor[i]),!n(this[t])&&n(e)&&(this[t]=e))},__createMain:function(){return document.createElement("div")},__getClass:function(t){var e,i,n=this,s=n._type.toLowerCase(),a=t?"-"+t:"",o=["ui-"+s+a],r=n.skin;if(r&&"string"==typeof r&&(r=n.skin=r.split(/\s+/)),r instanceof Array)for(e=0,i=r.length;i>e;e++)o.push("skin-"+s+"-"+r[e]+a);return o.join(" ")},__getId:function(t){var e="ctrl"+this._type+this.id;return t?e+t:e},__getStrRef:function(){return"esui.util.get('"+this.id+"')"},__getStrCall:function(t){var e,i,n=arguments.length,s=[];if(n>1)for(e=1;n>e;e++)i=arguments[e],"string"==typeof i&&(i="'"+i+"'"),s.push(i);return esui.util.format("{0}.{1}({2});",this.__getStrRef(),t,s.join(","))},__initStateChanger:function(){var t=this,e=t.main;t._state={},e&&(e.onmouseover=t.__getMainOverHandler(),e.onmouseout=t.__getMainOutHandler(),e.onmousedown=t.__getMainDownHandler(),e.onmouseup=t.__getMainUpHandler())},__getMainOverHandler:function(){var t=this;return function(){t._state.disabled||t.addState("hover")}},__getMainOutHandler:function(){var t=this;return function(){t._state.disabled||(t.removeState("hover"),t.removeState("press"))}},__getMainDownHandler:function(){var t=this;return function(){t._state.disabled||t.addState("press")}},__getMainUpHandler:function(){var t=this;return function(){t._state.disabled||t.removeState("press")}},_STATES:["hover","press","active","disabled","readonly","focus"],validate:function(){return this.rule?esui.util.validate(this,this.rule):!0}},esui.Button=function(t){this._type="button",this._autoState=1,esui.Control.call(this,t)},esui.Button.prototype={_tplButton:'<div id="{2}" class="{1}">{0}</div>',onclick:new Function,_getMainHtml:function(){var t=this;return esui.util.format(t._tplButton,t.content||"&nbsp;",t.__getClass("label"),t.__getId("label"))},setActive:function(t){var e="active";t?this.setState(e):this.removeState(e)},render:function(){var t,e,i=this,n=i.main;i._isRendered||(i.content||(i.content=n.innerHTML),"BUTTON"==n.tagName&&(t=n.parentNode,e=document.createElement("div"),t.insertBefore(e,n),t.removeChild(n),n=i.main=e),esui.Control.prototype.render.call(i),n.innerHTML=i._getMainHtml(),n.onclick=i._getHandlerClick(),i._isRendered=!0),i.width&&(n.style.width=i.width+"px"),i.setDisabled(i.disabled)},_getHandlerClick:function(){var t=this;return function(e){t.isDisabled()||!1===t.onclick()&&baidu.event.stop(e||window.event)}},setContent:function(t){baidu.g(this.__getId("label")).innerHTML=t},__dispose:function(){this.onclick=null,esui.Control.prototype.__dispose.call(this)}},baidu.inherits(esui.Button,esui.Control),esui.InputControl=function(t){function e(t){t&&("string"==typeof t?n.push(esui.validator.Rule.get(t)):t instanceof esui.validator.Rule?n.push(t):"object"==typeof t&&n.push(new esui.validator.Rule({name:t.name,errorMessage:t.errorMessage,check:t.check})))}esui.Control.call(this,t),this._validatorMessageClass="ui-validator-message";var i=this.rule,n=[];if(this._rules=n,"string"==typeof i&&(i=i.split(",")),i instanceof Array){var s,a=i.length;for(s=0;a>s;s++)e(i[s])}else e(i)},esui.InputControl.prototype={render:function(){this.name=this.main.getAttribute("name"),esui.Control.prototype.render.call(this)},getName:function(){return this.name},getValue:function(){return this.value},setValue:function(t){this.value=t},__createInput:function(t){var e,i=t.tagName,n=t.name,s=t.type,a=i;return n&&(a="<"+i+' name="'+this.name+'">'),e=document.createElement(a),e||(e=document.createElement(i),n&&(e.name=n)),s&&(e.type=s),e},onbeforevalidate:new Function,onaftervalidate:new Function,oninvalid:new Function,__validate:function(t){var e,i,n,s,a=this._rules,o=new esui.validator.Validity;for(!t&&this.onbeforevalidate(o),e=0,i=a.length;i>e;e++)n=a[e],o.addState(n.getName(),n.checkValidity(this));return!t&&this.onaftervalidate(o),s=o.isValid(),s||this.oninvalid(o),!t&&this.showValidity(o),s},checkValidity:function(){return this.__validate(!0)},validate:function(){return this.__validate()},showValidity:function(t){var e,i,n,s=t.isValid(),a=this.__getValidMsgDom(),o=t.getStateList(),r=t.getCustomMessage(),l=[];if(s)a.innerHTML="",baidu.hide(a);else{if(r)a.innerHTML=r;else{for(e=0,i=o.length;i-1>e;e++)n=o[e],!n.getState()&&l.push(n.getMessage());a.innerHTML=l.join(",")}baidu.show(a)}},__getValidMsgDom:function(){var t,e=this.__getId("validatemessage"),i=baidu.g(e);return i||(i=document.createElement("span"),i.id=e,i.className=this._validatorMessageClass,t=this.main.parentNode,t&&t.insertBefore(i,this.main.nextSibling)),i}},baidu.inherits(esui.InputControl,esui.Control),esui.Layer=function(t){esui.Control.call(this,t),this._type=this.retype||"layer",this._autoState=0,this.top=0,this.left=0,this.autoHide=this.autoHide||""},esui.Layer.prototype={render:function(){var t=this.main;if(esui.Control.prototype.render.call(this),t.style.position="absolute",t.style.left=this._HIDE_POS,t.style.top=this._HIDE_POS,this.zIndex&&(t.style.zIndex=this.zIndex),this.width&&(t.style.width=this.width+"px"),this.height&&(t.style.height=this.height+"px"),!this._autoHideInited){switch(this.autoHide.toLowerCase()){case"click":this._clickHandler=this._getClickHider(),baidu.on(document,"click",this._clickHandler);break;case"out":t.onmouseout=this._getOutHandler(),t.onmouseover=this._getOverHandler()}this._autoHideInited=1}},__getClass:function(t){return t=t||this.partName,esui.Control.prototype.__getClass.call(this,t)},_getOverHandler:function(){var t=this;return function(){t.show()}},_getOutHandler:function(){var t=this;return function(){t.onhide(),t.hide()}},onhide:new Function,_getClickHider:function(){var t=this;return function(e){if(t._isHidePrevent)return t._isHidePrevent=0,void 0;for(var i=baidu.event.getTarget(e);i&&i!=document.body;){if(i==t.main)return;i=i.parentNode}t.onhide(),t.hide()}},_preventHide:function(){this._isHidePrevent=1},_HIDE_POS:"-10000px",setWidth:function(t){this.main.style.width=t+"px",this.width=t},getWidth:function(){return this.width||this.main.offsetWidth},setHeight:function(t){this.main.style.height=t+"px",this.height=t},getHeight:function(){return this.height||this.main.offsetHeight},show:function(t,e){this._isShow=1,this.left=t||this.left,this.top=e||this.top,this.main.style.left=this.left+"px",this.main.style.top=this.top+"px"},hide:function(){this._isShow=0,this.main.style.left=this._HIDE_POS,this.main.style.top=this._HIDE_POS},isShow:function(){return!!this._isShow},__dispose:function(){var t=this.main;this._clickHandler&&(baidu.un(document,"click",this._clickHandler),this._clickHandler=null),this.onhide=null,esui.Control.prototype.__dispose.call(this),t.innerHTML="",t.parentNode&&t.parentNode.removeChild(t)}},baidu.inherits(esui.Layer,esui.Control),esui.MonthView=function(t){this._type="month",this._autoState=0,esui.Control.call(this,t),this.now=this.now||esui.config.NOW||new Date;var e=this.valueAsDate||this.now;this.year=parseInt(this.year,10)||e.getFullYear(),this.month=parseInt(this.month,10)||e.getMonth()},esui.MonthView.prototype={setView:function(t){this.month=t.getMonth(),this.year=t.getFullYear(),this.render()},getValueAsDate:function(){return this.valueAsDate||null},setValueAsDate:function(t){if(t instanceof Date){var e=this;e._resetSelected(),e.valueAsDate=t,e._paintSelected()}},render:function(){esui.Control.prototype.render.call(this),this.main.innerHTML=this._getHtml(),this.setValueAsDate(this.valueAsDate)},_tplItem:'<td year="{1}" month="{2}" date="{0}" class="{4}" style="{5}" id="{3}" onmouseover="{6}" onmouseout="{7}" onclick="{8}">{0}</td>',_tplHead:'<table border="0" cellpadding="0" cellspacing="0" class="{0}"><thead><tr>',TITLE_WORDS:["一","二","三","四","五","六","日"],_getHtml:function(){var t,e,i,n,s=this,a=[esui.util.format(s._tplHead,s.__getClass("main"))],o=0,r=s.year,l=s.month,u=new Date(r,l,1),d=new Date(r,l+1,1),h=1-(u.getDay()+6)%7,c=s.TITLE_WORDS,_=c.length,g=s.__getClass("over"),p=s.__getClass("item-virtual"),f=s.__getClass("item"),m="baidu.addClass(this, '"+g+"')",v="baidu.removeClass(this, '"+g+"')";for(t=0;_>t;t++)a.push('<td class="'+s.__getClass("title")+'">'+c[t]+"</td>");for(a.push("</tr></thead><tbody><tr>"),u.setDate(h);d-u>0||0!==o%7;)h>0&&0===o%7&&a.push("</tr><tr>"),e=u.getMonth()!=l,i=f,n=s._getCustomDateValue("customClass",u),e&&(i+=" "+p),n&&(i+=" "+n),a.push(esui.util.format(s._tplItem,u.getDate(),u.getFullYear(),u.getMonth(),s._getItemId(u),i,s._getCustomDateValue("customStyle",u),e?"":m,e?"":v,e?"":s.__getStrRef()+"._selectByItem(this)")),u=new Date(r,l,++h),o++;return a.push("</tr></tbody></table>"),a.join("")},_getCustomDateValue:function(t,e){var i=this[t],n=typeof i;switch(n){case"string":return i;case"function":return i.call(this,e)||""}return""},_selectByItem:function(t){var e=t.getAttribute("date"),i=t.getAttribute("month"),n=t.getAttribute("year");this._change(new Date(n,i,e))},onchange:new Function,_change:function(t){t&&this.onchange(t)!==!1&&this.setValueAsDate(t)},_resetSelected:function(){var t=this;if(t.valueAsDate){var e=baidu.g(t._getItemId(t.valueAsDate));e&&baidu.removeClass(e,t.__getClass("selected")),t.valueAsDate=null}},_paintSelected:function(){var t=this;if(t.valueAsDate){var e=t.valueAsDate,i=baidu.g(t._getItemId(e));i&&baidu.addClass(i,t.__getClass("selected"))}},_getItemId:function(t){return this.__getId(t.getFullYear()+"-"+t.getMonth()+"-"+t.getDate())}},baidu.inherits(esui.MonthView,esui.Control),esui.Select=function(t){this._type="select",this._autoState=1,esui.InputControl.call(this,t),this.__initOption("maxItem",null,"MAX_ITEM"),this.__initOption("emptyText",null,"EMPTY_TEXT"),this.emptyLabel=esui.util.format(this._tplLabel,this.__getClass("text-def"),this.emptyText),this.datasource=this.datasource||[]},esui.Select.EMPTY_TEXT="请选择",esui.Select.MAX_ITEM=8,esui.Select.prototype={disable:function(){this.hideLayer(),esui.InputControl.prototype.disable.call(this)},enable:function(){this.hideLayer(),esui.InputControl.prototype.enable.call(this)},render:function(){var t=this,e=t.main,i=t.value;t._isRendered||(esui.InputControl.prototype.render.call(t),e.innerHTML=t._getMainHtml(),e.onclick=t._getMainClickHandler(),t._isRendered=1),t._renderLayer(),t.width&&(e.style.width=t.width+"px"),!t.value&&esui.util.hasValue(t.selectedIndex)?t.setSelectedIndex(t.selectedIndex):t.setValue(i),t.setReadOnly(!!t.readOnly),t.setDisabled(!!t.disabled)},_tplMain:'<div id="{0}" class="{1}" value="" style="width:{3}px"><nobr>{2}</nobr></div><div class="{4}" arrow="1"></div>',_tplLabel:'<span class="{0}">{1}</span>',_getMainHtml:function(){var t=this;return esui.util.format(t._tplMain,t.__getId("text"),t.__getClass("text"),t.staticText||t.emptyLabel,t.width-20,t.__getClass("arrow"))},_renderLayer:function(){var t,e,i,n=this,s=n.__getId("layer"),a=n.getLayer(),o=n.datasource.length,r=n.maxItem;a||(a=esui.util.create("Layer",{id:s,autoHide:"click",retype:n._type,partName:"layer",skin:n.skin}),a.appendTo(),n._controlMap.layer=a,a.onhide=n._getLayerHideHandler()),t=a.main,t.style.width="auto",t.style.height="auto",t.innerHTML=n._getLayerHtml(),e=t.offsetWidth,o>r&&(i=t.firstChild.offsetHeight,t.style.height=r*(i+1)+"px",e+=17),e<n.width?a.setWidth(n.width):a.setWidth(e)},_getLayerHideHandler:function(){var t=this;return function(){t.removeState("active")}},_tplItem:'<div id="{0}" {10} class="{1}" index="{2}" value="{3}" dis="{4}" onmouseover="{6}" onmouseout="{7}" onclick="{8}">{9}<nobr>{5}</nobr></div>',_tplIcon:'<span class="{0}"></span>',_getLayerHtml:function(){for(var t,e,i,n,s,a,o=this,r=o.datasource,l=0,u=r.length,d=[],h=o.__getStrRef(),c=o.__getClass("item");u>l;l++)t=c,e=0,i=r[l],s="",a="",i.icon&&(n=o.__getClass("icon-"+i.icon),s=esui.util.format(o._tplIcon,n)),i.style&&(t+=" "+c+"-"+i.style),i.disabled&&(e=1,t+=" "+c+"-disabled"),i.value==o.value&&(t+=" "+o.__getClass("item-selected")),o.titleTip&&(a='title="'+i.name+s+'"'),d.push(esui.util.format(o._tplItem,o.__getId("item")+l,t,l,i.value,e,i.name,h+"._itemOverHandler(this)",h+"._itemOutHandler(this)",h+"._itemClickHandler(this)",s,a));return d.join("")},setReadOnly:function(t){this.readOnly=t=!!t,t?this.addState("readonly"):this.removeState("readonly")},_getMainClickHandler:function(){var t=this;return function(e){e=e||window.event;var i=e.srcElement||e.target;t.readOnly||t.isDisabled()||(i.getAttribute("arrow")||t.onmainclick()!==!1)&&(t.getLayer()._preventHide(),t.toggleLayer())}},onmainclick:new Function,showLayer:function(){var t,e=this,i=e.main,n=baidu.dom.getPosition(i),s=e.getLayer(),a=s.main,o=a.offsetHeight,r=i.offsetHeight,l=baidu.page.getViewHeight(),u=n.top+r+o-baidu.page.getScrollTop();t=l>u?n.top+r-1:n.top-o+1,s.show(n.left,t),e.addState("active")},hideLayer:function(){this.getLayer().hide(),this.removeState("active")},toggleLayer:function(){var t=this;t.getLayer().isShow()?t.hideLayer():t.showLayer()},getLayer:function(){return this._controlMap.layer},_getCur:function(){return baidu.g(this.__getId("text"))},getValue:function(){return esui.util.hasValue(this.value)?String(this.value):""},setValue:function(t){var e,i,n,s=this,a=s.getLayer().main,o=a.getElementsByTagName("div");if(esui.util.hasValue(t))for(i=0,e=o.length;e>i;i++)if(n=o[i].getAttribute("value"),n==t)return s.setSelectedIndex(i),void 0;s.value=null,s.setSelectedIndex(-1)},setSelectedIndex:function(t,e){var i,n=this.datasource[t];i=n?n.value:null,this.selectedIndex=t,this.value=i,(e!==!0||this.onchange(i,n)!==!1)&&this._repaint()},onchange:new Function,_repaint:function(){var t=this.datasource[this.selectedIndex],e=this.staticText||(t?t.name:this.emptyLabel),i=this.staticText||(t?t.name:this.emptyText),n=this._getCur();this.titleTip&&(n.title=i),n.innerHTML="<nobr>"+e+"</nobr>",this._repaintLayer()},_repaintLayer:function(){for(var t=this,e=t.selectedIndex,i=t.getLayer().main.firstChild,n=t.__getClass("item-selected");i;)i.getAttribute("index")==e?baidu.addClass(i,n):baidu.removeClass(i,n),i=i.nextSibling},_itemClickHandler:function(t){var e=t.getAttribute("index"),i=t.getAttribute("dis");1!=i&&(this.hideLayer(),this.setSelectedIndex(parseInt(e,10),!0))},_itemOverHandler:function(t){if(1!=t.getAttribute("dis")){var e=t.getAttribute("index");baidu.addClass(this.__getId("item")+e,this.__getClass("item-hover"))}},_itemOutHandler:function(t){var e=t.getAttribute("index");baidu.removeClass(this.__getId("item")+e,this.__getClass("item-hover"))},__dispose:function(){this.onchange=null,esui.InputControl.prototype.__dispose.call(this)}},baidu.inherits(esui.Select,esui.InputControl),esui.Calendar=function(t){this._type="cal",this._autoState=1,esui.InputControl.call(this,t),this.now=this.now||esui.config.NOW||new Date;var e=this.now;e=this.now=new Date(e.getFullYear(),e.getMonth(),e.getDate()),this.__initOption("dateFormat",null,"DATE_FORMAT"),this.__initOption("valueFormat",null,"VALUE_FORMAT"),this.__initOption("range",null,"RANGE");var i;this.value&&(i=baidu.date.parse(this.value)),this.valueAsDate=i?i:this.valueAsDate||new Date(e.getTime()),i=this.valueAsDate,this.month=parseInt(this.month,10),isNaN(this.month)&&(this.month=i.getMonth()),this.year=parseInt(this.year,10)||i.getFullYear()},esui.Calendar.DATE_FORMAT="yyyy-MM-dd",esui.Calendar.VALUE_FORMAT="yyyy-MM-dd",esui.Calendar.RANGE={begin:new Date(2001,8,3),end:new Date(2046,10,4)},esui.Calendar.prototype={render:function(){var t=this,e=t.main;t._isRendered||(esui.InputControl.prototype.render.call(t),e.innerHTML=t._getMainHtml(),e.onclick=t._getMainClickHandler(),t._renderLayer(),t._isRendered=1),t.setValueAsDate(t.valueAsDate)},getValue:function(){return this.valueAsDate?baidu.date.format(this.valueAsDate,this.valueFormat):""},setValue:function(t){var e=baidu.date.parse(t);e&&this.setValueAsDate(e)},getValueAsDate:function(){return this.valueAsDate||null},setValueAsDate:function(t){if(t){var e=this;e.valueAsDate=t,e.getLayer()._controlMap.monthview.setValueAsDate(t),e.month=t.getMonth(),e.year=t.getFullYear(),e._repaintMonthView(),baidu.g(e.__getId("text")).innerHTML=baidu.date.format(t,e.dateFormat)}},_getMainClickHandler:function(){var t=this;return function(){t.isDisabled()||(t.getLayer()._preventHide(),t.toggleLayer())}},toggleLayer:function(){var t=this;this.getLayer().isShow()?t.hideLayer():t.showLayer()},hideLayer:function(){this.getLayer().hide(),this.removeState("active")},showLayer:function(){var t,e=this,i=e.main,n=baidu.dom.getPosition(i),s=baidu.page.getWidth(),a=e.getLayer(),o=a.main.offsetWidth,r=n.top+i.offsetHeight;t=s<n.left+o?n.left+i.offsetWidth-o:n.left,a.show(t,r),this.addState("active")},_getMainHtml:function(){var t=this,e="text",i=t.getValueAsDate();return esui.util.format(t._tplMain,t.__getId(e),t.__getClass(e),t.__getClass("arrow"),baidu.date.format(i,t.dateFormat))},_tplMain:'<div class="{1}" id="{0}">{3}</div><div class="{2}"></div>',_tplLayer:'<div class="{0}"><table><tr><td width="40" align="left"><div ui="type:Button;id:{1};skin:back"></div></td><td><div ui="type:Select;id:{3};width:55"</td><td><div ui="type:Select;id:{4};width:40"</td><td width="40" align="right"><div ui="type:Button;id:{2};skin:forward"></div></td></tr></table></div><div ui="id:{5};type:MonthView"></div>',_renderLayer:function(){var t=this,e=t.__getId("layer"),i=esui.util.create("Layer",{id:e,autoHide:"click",retype:t._type,partName:"layer",skin:t.skin});t._controlMap.layer=i,i.appendTo(),i.onhide=t._getLayerHideHandler(),i.main.innerHTML=esui.util.format(t._tplLayer,t.__getClass("layer-head"),t.__getId("prevmonth"),t.__getId("nextmonth"),t.__getId("year"),t.__getId("month"),t.__getId("monthview")),t._initLayerUI()},_initLayerUI:function(){var t,e=this.__getId("prevmonth"),i=this.__getId("nextmonth"),n=this.__getId("year"),s=this.__getId("month"),a=this.__getId("monthview"),o=this.getLayer(),r={},l=o._controlMap;r[a]={valueAsDate:this.valueAsDate,customClass:this._getMVCustomClass()},r[s]={datasource:this._getMonthOptions(this.year),value:this.month},r[n]={datasource:this._getYearOptions(),value:this.year},t=esui.util.init(o.main,r),e=t[e],i=t[i],n=t[n],s=t[s],a=t[a],l.prevMonth=e,l.nextMonth=i,l.year=n,l.month=s,l.monthview=a,n.onchange=this._getYearChangeHandler(),s.onchange=this._getMonthChangeHandler(),i.onclick=this._getMonthNexter(),e.onclick=this._getMonthPrever(),a.onchange=this._getMVChangeHandler()},_isInRange:function(t){var e=this.range.begin,i=this.range.end;return e&&0>t-e||i&&0>i-t?!1:!0},_getMVChangeHandler:function(){var t=this;return function(e){if(!t._isInRange(e))return!1;if(t.onchange(e)===!1)return!1;t.value=e,t.hideLayer();var i=baidu.g(t.__getId("text"));i.innerHTML=baidu.date.format(e,t.dateFormat)}},onchange:new Function,_getMVCustomClass:function(){var t=this;return function(e){return t._isInRange(e)?"":this.__getClass("item-out")}},_getMonthNexter:function(){var t=this;return function(){t._repaintMonthView(t.year,t.month+1)}},_getMonthPrever:function(){var t=this;return function(){t._repaintMonthView(t.year,t.month-1)}},_getYearChangeHandler:function(){var t=this;return function(e){t.year=e,t._repaintMonthView(e,t.month),t.getLayer()._preventHide()}},_getMonthChangeHandler:function(){var t=this;return function(e){t._repaintMonthView(t.year,e),t.getLayer()._preventHide()}},getLayer:function(){return this._controlMap.layer},_getLayerHideHandler:function(){var t=this;return function(){t.removeState("active")}},_getYearOptions:function(){for(var t=this.range,e=[],i=t.end.getFullYear(),n=t.begin.getFullYear();i>=n;n++)e.push({name:n,value:n});return e},_getMonthOptions:function(t){var e=this.range,i=[],n=0,s=11;for(t==e.begin.getFullYear()&&(n=e.begin.getMonth()),t==e.end.getFullYear()&&(s=e.end.getMonth());s>=n;n++)i.push({name:n+1,value:n});return i},_repaintMonthView:function(t,e){esui.util.hasValue(t)||(t=this.year),esui.util.hasValue(e)||(e=this.month);var i=this,n=i.range,s=new Date(t,e,1),a=i.getLayer(),o=a._controlMap,r=o.monthview,l=12*n.begin.getFullYear()+n.begin.getMonth(),u=12*n.end.getFullYear()+n.end.getMonth(),d=12*t+e,h=o.month;e=s.getMonth(),l-d>0?e+=l-d:d-u>0&&(e-=d-u),s.setMonth(e),i.month=s.getMonth(),i.year=s.getFullYear(),h.datasource=i._getMonthOptions(i.year),h.render(),h.setValue(i.month),o.year.setValue(i.year),o.prevMonth.setDisabled(l>=d),o.nextMonth.setDisabled(d>=u),r.setView(s)},__dispose:function(){this.onchange=null,esui.InputControl.prototype.__dispose.call(this)}},baidu.inherits(esui.Calendar,esui.InputControl),esui.BoxGroup=function(t){this.name=t.name,this.type=t.type,this.control=t.control},esui.BoxGroup.prototype={getValue:function(){for(var t,e=this,i=e.getBoxList(),n=i.length,s=[],a=0;n>a;a++)t=i[a],t.isChecked()&&s.push(t.getValue());return s.join(",")},selectAll:function(){if("checkbox"==this.type)for(var t=this.getBoxList(),e=t.length,i=0;e>i;i++)t[i].setChecked(!0)},selectInverse:function(){if("checkbox"==this.type)for(var t,e=this.getBoxList(),i=e.length,n=0;i>n;n++)t=e[n],t.setChecked(!t.isChecked())},getBoxList:function(){for(var t,e,i,n,s,a=this,o=a.name,r=a.type,l=[],u=a.control.main;u&&"FORM"!=u.tagName&&u!=document.body;)u=u.parentNode;for(t=u.getElementsByTagName("input"),n=t.length,e=0;n>e;e++)i=t[e],s=esui.util.getControlByDom(i),s&&s instanceof esui.BoxControl&&s.getType()==r&&s.name==o&&l.push(s);return l}},esui.BoxControl=function(t){this._autoState=1,esui.InputControl.call(this,t)},esui.BoxControl.prototype={onclick:new Function,getType:function(){return this._type},setChecked:function(t){this.main.checked=!!t},isChecked:function(){return this.main.checked},disable:function(){this.main.disabled=!0,this.disabled=!0,esui.InputControl.prototype.disable.call(this)},enable:function(){this.main.disabled=!1,this.disabled=!1,esui.InputControl.prototype.enable.call(this)},setReadOnly:function(t){this.main.disabled=t,t?this.addState("readonly"):this.removeState("readonly")},getGroup:function(){return new esui.BoxGroup({name:this.name,type:this._type,control:this})},setValue:function(t){this.main.setAttribute("value",t)},getValue:function(){return this.main.getAttribute("value")||"on"},render:function(){var t,e,i,n=this,s=n.main,a=n.datasource;switch(esui.InputControl.prototype.render.call(n),n._mainClick||(n._mainClick=n.__getClickHandler(),s.onclick=n._mainClick),n._label?e=n._label:(e=document.createElement("label"),e.className=n.__getClass("label"),baidu.setAttr(e,"for",s.id),baidu.dom.insertAfter(e,s),n._label=e),t=n.title||s.title||n.getValue(),e.innerHTML=baidu.encodeHTML(t),n.setDisabled(!!n.disabled),n.value&&n.setValue(n.value),i=n.getValue(),typeof a){case"string":case"number":n.setChecked(a==i);break;default:a instanceof Array&&n.setChecked(baidu.array.contains(a,i))}},__getClickHandler:function(){var t=this;return function(e){t.isDisabled()||t.onclick(e)}},__dispose:function(){this.onclick=null,this._mainClick=null,this._label=null,esui.InputControl.prototype.__dispose.call(this)},__createMain:function(){return esui.InputControl.prototype.__createInput.call(this,{tagName:"input",name:this.name,type:this.type})}},baidu.inherits(esui.BoxControl,esui.InputControl),esui.CheckBox=function(t){this._type="checkbox",esui.BoxControl.call(this,t)},baidu.inherits(esui.CheckBox,esui.BoxControl),esui.Radio=function(t){this._type="radiobox",esui.BoxControl.call(this,t)},baidu.inherits(esui.Radio,esui.BoxControl),esui.Mask=function(){function t(t){var e=a+t,i=document.createElement("div");i.id=e,document.body.appendChild(i)}function e(t){var e=Math.max(document.documentElement.clientWidth,Math.max(document.body.scrollWidth,document.documentElement.scrollWidth)),i=Math.max(document.documentElement.clientHeight,Math.max(document.body.scrollHeight,document.documentElement.scrollHeight));t.style.width=e+"px",t.style.height=i+"px"}function i(t){return function(){e(n(t))}}function n(e){var i=a+e,n=baidu.g(i);return n||t(e),baidu.g(i)}var s="ui-mask",a="ctrlMask",o={};return{show:function(t,a){t=t||"0";var r=n(t),l=[];l.push(s),l.push(s+"-level-"+t),a&&l.push(s+"-"+a),e(r),r.className=l.join(" "),r.style.display="block";var u=i(t);o[t]=u,baidu.on(window,"resize",u)},hide:function(t){t=t||"0";var e=n(t);if("undefined"!=typeof e){e.style.display="none";var i=o[t];baidu.un(window,"resize",i)}}}}(),esui.Dialog=function(t){this._type="dialog",this._autoState=0,esui.Control.call(this,t),this.__initOption("autoPosition",null,"AUTO_POSITION"),this.__initOption("draggable",null,"DRAGGABLE"),this.__initOption("closeButton",null,"CLOSE_BUTTON"),this.__initOption("width",null,"WIDTH"),this.__initOption("top",null,"TOP"),this.top=parseInt(this.top,10),this._resizeHandler=this._getResizeHandler()},esui.Dialog.prototype={_tplHead:'<div id="{0}" class="{1}" onmouseover="{4}" onmouseout="{5}">{2}</div>{3}',_tplClose:'<div ui="type:Button;id:{0};skin:layerclose"></div>',show:function(){var t,e=this.mask;this.getLayer()||this.render(),t=this.getLayer().main,t.style.display="",this.autoPosition&&baidu.on(window,"resize",this._resizeHandler),this._resizeHandler(),e&&esui.Mask.show(e.level,e.type),this._isShow=!0
},hide:function(){this._isShow&&(this.autoPosition&&baidu.un(window,"resize",this._resizeHandler),this.getLayer().hide(),this.mask&&esui.Mask.hide(this.mask.level)),this._isShow=0},getLayer:function(){return this._controlMap.layer},setTitle:function(t){var e=baidu.g(this.__getId("title"));e&&(e.innerHTML=t),this.title=t},setContent:function(t){this.content=t;var e=this.getBody();e&&(e.innerHTML=t)},_getResizeHandler:function(){var t=this;return function(){var e=t.getLayer(),i=e.main,n=t.left,s=t.top;n||(n=(baidu.page.getViewWidth()-i.offsetWidth)/2),s+=baidu.page.getScrollTop(),0>n&&(n=0),0>s&&(s=0),e.show(n,s)}},_getCloseHandler:function(){var t=this;return function(){t.onhide(),t.hide()}},onhide:new Function,render:function(){var t=this,e=t.getLayer(),i=t.main;e||(e=esui.util.create("Layer",{id:t.__getId("layer"),retype:t._type,skin:t.skin+(t.draggable?" draggable":""),width:t.width,main:i}),e.appendTo(),t._controlMap.layer=e,t._initStruct(),this.draggable&&baidu.dom.draggable(e.main,{handler:this.getHead()}))},appendTo:function(){this.render()},_initStruct:function(){var t,e,i=this.getLayer(),n=i.main,s=[];for(e=n.firstChild;e;)1==e.nodeType&&s.push(e),e=e.nextSibling;t=s.length,this._initHead(2>t,s[0]),this._initBody(1>t,s[1]||s[0]),this._initFoot(3>t,s[2])},__createMain:function(){},_initHead:function(t,e){var i,n,s=this,a=s.getLayer(),o=a.main,r=s.__getId("close");t?(e=document.createElement("div"),o.insertBefore(e,o.firstChild)):this.title=this.title||e.innerHTML,baidu.addClass(e,this.__getClass("head")),e.id=this.__getId("head"),e.innerHTML=esui.util.format(s._tplHead,s.__getId("title"),s.__getClass("title"),s.title,s.closeButton?esui.util.format(s._tplClose,r):"",s.__getStrCall("_headOver"),s.__getStrCall("_headOut")),i=esui.util.init(e),n=i[r],n&&(a._controlMap._close=n,n.onclick=s._getCloseHandler())},_initBody:function(t,e){t&&(e=document.createElement("div"),this.getLayer().main.appendChild(e)),baidu.addClass(e,this.__getClass("body")),e.id=this.__getId("body"),this.content?e.innerHTML=this.content:this.content=e.innerHTML},_initFoot:function(t,e){var i,n,s,a=this.getLayer(),o=0,r=0;for(t&&(e=document.createElement("div"),a.main.appendChild(e)),baidu.addClass(e,this.__getClass("foot")),e.id=this.__getId("foot"),this.footContent&&(e.innerHTML=this.footContent),esui.util.init(e),i=esui.util.getControlsByContainer(e),this._commandHandler=this._getCommandHandler(),s=i.length;s>o;o++)n=i[o],n instanceof esui.Button&&(n.onclick=this._commandHandler,n._dialogCmdIndex=r,r++),a._controlMap[n.id]=n},_getCommandHandler:function(){var t=this;return function(){t.oncommand({index:this._dialogCmdIndex})!==!1&&t.hide()}},oncommand:new Function,getBody:function(){return baidu.g(this.__getId("body"))},getHead:function(){return baidu.g(this.__getId("head"))},getFoot:function(){return baidu.g(this.__getId("foot"))},_headOver:function(){baidu.addClass(this.getHead(),this.__getClass("head-hover"))},_headOut:function(){baidu.removeClass(this.getHead(),this.__getClass("head-hover"))},__dispose:function(){this.autoPosition&&baidu.un(window,"resize",this._resizeHandler),this.oncommand=null,this._resizeHandler=null,esui.Control.prototype.__dispose.call(this)}},baidu.inherits(esui.Dialog,esui.Control),esui.Dialog.TOP=100,esui.Dialog.WIDTH=400,esui.Dialog.CLOSE_BUTTON=1,esui.Dialog.OK_TEXT="确定",esui.Dialog.CANCEL_TEXT="取消",esui.Dialog._increment=function(){var t=0;return function(){return t++}}(),esui.Dialog.alert=function(){function t(t,e){return function(){var s=esui.util.get(i+e),a="function"==typeof t;return(a&&t(s)!==!1||!a)&&(s.hide(),esui.util.dispose(n+e),esui.util.dispose(s.id)),!1}}function e(e){if(e){var o=esui.Dialog._increment(),r=e.title||"",l=e.content||"",u=e.type||"warning",d=esui.util.create("Dialog",{id:i+o,closeButton:0,title:"",width:440,mask:{level:3},footContent:esui.util.format(a,n+o,esui.Dialog.OK_TEXT)});d.show(),d.oncommand=t(e.onok,o),d.setTitle(r),d.getBody().innerHTML=esui.util.format(s,u,l)}}var i="__DialogAlert",n="__DialogAlertOk",s='<div class="ui-dialog-icon ui-dialog-icon-{0}"></div><div class="ui-dialog-text">{1}</div>',a='<button ui="type:Button;id:{0};skin:em">{1}</button>';return e}(),esui.Dialog.confirm=function(){function t(t,e,n){return function(s){var a=esui.util.get(i+n),o=0===s.index?t:e,r="function"==typeof o;return(r&&o(a)!==!1||!r)&&(a.hide(),esui.util.dispose(a.id)),!1}}function e(e){if(e){var r=esui.Dialog._increment(),l=e.title||"",u=e.content||"",d=e.type||"warning",h=esui.util.create("Dialog",{id:i+r,closeButton:0,title:"",width:440,mask:{level:3},footContent:esui.util.format(o,n+r,esui.Dialog.OK_TEXT,s+r,esui.Dialog.CANCEL_TEXT)});h.show(),h.setTitle(l),h.getBody().innerHTML=esui.util.format(a,d,u),h.oncommand=t(e.onok,e.oncancel,r)}}var i="__DialogConfirm",n="__DialogConfirmOk",s="__DialogConfirmCancel",a='<div class="ui-dialog-icon ui-dialog-icon-{0}"></div><div class="ui-dialog-text">{1}</div>',o='<button ui="type:Button;id:{0};skin:em">{1}</button><button ui="type:Button;id:{2};">{3}</button>';return e}(),esui.FormTab=function(t){this.disableHidden=1,esui.Control.call(this,t),this.__initOption("autoDisabled",null,"AUTO_DISABLED"),this.tabs=this.datasource||this.tabs||[]},esui.FormTab.AUTO_DISABLED=1,esui.FormTab.prototype={init:function(){var t=this;this.activeIndex=this.activeIndex||0,t.isInited||(t._initEvent(),t.isInited=1),setTimeout(function(){t.setActiveIndex(t.activeIndex)},0)},render:function(){this.init()},__createMain:function(){return null},_initEvent:function(){var t,e,i,n=this.tabs,s=n.length;for(t=0;s>t;t++)e=n[t],i=e.radio,i&&(i=esui.util.get(i),i&&(i.onclick=this._getRadioClickHandler(t)))},_getRadioClickHandler:function(t){var e=this;return function(){return e._select(t)}},_select:function(t){return this.onchange(t,this.tabs[t])!==!1?(this.setActiveIndex(t),void 0):!1},setActiveIndex:function(t){var e=this.tabs,i=e.length;t>=0&&i>t&&(esui.util.get(e[t].radio).setChecked(!0),this.activeIndex=t),this._resetPanel()},onchange:new Function,_resetPanel:function(){var t,e,i,n,s,a=this.tabs,o=a.length;for(t=0;o>t;t++)e=a[t],n=e.radio,i=e.panel,i=i&&baidu.g(i),n&&i&&(n=esui.util.get(n),n&&(s=n.isChecked(),this.autoDisabled&&esui.util.setDisabledByContainer(i,!s),i.style.display=s?"":"none"))}},baidu.inherits(esui.FormTab,esui.Control),esui.Label=function(t){this._type="label",this._autoState=1,esui.Control.call(this,t)},esui.Label.prototype={render:function(){var t=this;esui.Control.prototype.render.call(t),this.text&&(this.content=baidu.encodeHTML(this.text)),this.setContent(this.content),this.setTitle(this.title)},setContent:function(t){this.content=t||"",this.main.innerHTML=this.content},setText:function(t){t=t||"",this.setContent(baidu.encodeHTML(t))},setTitle:function(t){this.title=t||"",this.main.setAttribute("title",this.title)},__createMain:function(){return document.createElement("span")}},baidu.inherits(esui.Label,esui.Control),esui.Link=function(t){this._type="link",this._autoState=0,esui.Control.call(this,t)},esui.Link.prototype={render:function(){var t=this;esui.Control.prototype.render.call(t),t.href&&t.setHref(t.href),t.text&&t.setText(t.text),t.content&&t.setContent(t.content),t.target&&t.setTarget(t.target),t._clickHandler||(t._clickHandler=t._getClickHandler(),t.main.onclick=t._clickHandler)},setHref:function(t){!t&&(t=""),this.main.href=t},setText:function(t){!t&&(t=""),this.setContent(baidu.encodeHTML(t))},setContent:function(t){!t&&(t=""),this.main.innerHTML=t},setTarget:function(t){!t&&(t=""),this.main.target=t},onclick:new Function,__createMain:function(){return document.createElement("a")},_getClickHandler:function(){var t=this;return function(e){return t.onclick(e)}},__dispose:function(){this._clickHandler=null,esui.Control.prototype.__dispose.call(this)}},baidu.inherits(esui.Link,esui.Control),esui.MiniMultiCalendar=function(t){this._type="mmcal",this._autoState=0,esui.InputControl.call(this,t),this.now=this.now||esui.config.NOW||new Date,this.__initOption("options",null,"OPTIONS"),this.__initOption("valueFormat",null,"VALUE_FORMAT");var e,i;this.value&&(i=this.value.split(","),2==i.length&&(e={begin:baidu.date.parse(i[0]),end:baidu.date.parse(i[1])})),this.valueAsObject=e?e:this.valueAsObject||{begin:new Date(this.now),end:new Date(this.now)}},esui.MiniMultiCalendar.VALUE_FORMAT="yyyy-MM-dd",esui.MiniMultiCalendar.prototype={getValue:function(){var t,e,i=this.valueAsObject,n=this.valueFormat;return i&&(t=i.begin)&&(e=i.end)?baidu.date.format(t,n)+","+baidu.date.format(e,n):""},setValue:function(t){if(t=t.split(","),2==t.length){var e=baidu.date.parse(t[0]),i=baidu.date.parse(t[1]);e&&i&&this.setValueAsObject({begin:e,end:i})}},getValueAsObject:function(){return this.valueAsObject||null},setValueAsObject:function(t){this.selectedIndex=null,this.valueAsObject=t,this.render()},render:function(){esui.InputControl.prototype.render.call(this),this.main.innerHTML=this._getHtml()},_tplItem:'<span index="{0}" class="{1}" id="{2}"{4}>{3}</span>',_isSameDate:function(t,e){return""!=e&&""!=t&&t.getFullYear()==e.getFullYear()&&t.getMonth()==e.getMonth()&&t.getDate()==e.getDate()?!0:!1},_getHtml:function(){var t,e,i,n,s,a=this,o=a.valueAsObject,r=a.options,l=r.length,u=a.__getId("option"),d=[];if(a._currentName="",esui.util.hasValue(a.selectedIndex))a._currentName=r[a.selectedIndex].name;else for(t=0;l>t;t++)if(i=r[t],e=i.getValue.call(a),a._isSameDate(o.begin,e.begin)&&a._isSameDate(o.end,e.end)){a.selectedIndex=t,a._currentName=i.name;break}for(t=0;l>t;t++)i=r[t],e=i.getValue.call(a),n=a.__getClass("option"),s=' onclick="'+a.__getStrCall("_selectByIndex",t)+'"',t==a.selectedIndex&&(n=n+" "+a.__getClass("option-selected"),s=""),d.push(esui.util.format(a._tplItem,t,n,u+t,i.name,s));return d.join("&nbsp;|&nbsp;")},onchange:new Function,_selectByIndex:function(t){var e,i,n=this.options;0>t||t>=n.length||(e=n[t],i=e.getValue.call(this),this.onchange(i,e.name,t)!==!1&&this.setSelectedIndex(t))},setSelectedIndex:function(t){var e=this.options,i=e[t];0>t||t>=e.length||(this.selectedIndex=t,this.value=i.getValue.call(this),this.render())},getName:function(t){if(t){var e,i,n,s=this.options,a=s.length;for(e=0;a>e;e++)if(i=s[e],n=i.getValue.call(this),this._isSameDate(n.begin,t.begin)&&this._isSameDate(n.end,t.end))return i.name;return""}return this._currentName}},esui.MiniMultiCalendar.OPTIONS=[{name:"昨天",value:0,getValue:function(){var t=new Date(this.now.getTime());return t.setDate(t.getDate()-1),{begin:t,end:t}}},{name:"最近7天",value:1,getValue:function(){var t=new Date(this.now.getTime()),e=new Date(this.now.getTime());return e.setDate(e.getDate()-1),t.setDate(t.getDate()-7),{begin:t,end:e}}},{name:"上周",value:2,getValue:function(){var t=(this.now,new Date(this.now.getTime())),e=new Date(this.now.getTime()),i=1;return t.getDay()<i%7?t.setDate(t.getDate()-14+i-t.getDay()):t.setDate(t.getDate()-7-t.getDay()+i%7),t.setHours(0,0,0,0),e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()+6),e.setHours(0,0,0,0),{begin:t,end:e}}},{name:"本月",value:3,getValue:function(){var t=(this.now,new Date(this.now.getTime())),e=new Date(this.now.getTime());return t.setDate(1),{begin:t,end:e}}},{name:"上个月",value:4,getValue:function(){var t=this.now,e=new Date(t.getFullYear(),t.getMonth()-1,1),i=new Date(t.getFullYear(),t.getMonth(),1);return i.setDate(i.getDate()-1),{begin:e,end:i}}},{name:"上个季度",value:5,getValue:function(){var t=this.now,e=new Date(t.getFullYear(),t.getMonth()-t.getMonth()%3-3,1),i=new Date(t.getFullYear(),t.getMonth()-t.getMonth()%3,1);return i.setDate(i.getDate()-1),{begin:e,end:i}}}],baidu.inherits(esui.MiniMultiCalendar,esui.InputControl),esui.MultiCalendar=function(t){this._type="mcal",this._autoState=1,esui.InputControl.call(this,t),this.__initOption("dateFormat",null,"DATE_FORMAT"),this.__initOption("valueFormat",null,"VALUE_FORMAT"),this.__initOption("okText",null,"OK_TEXT"),this.__initOption("cancelText",null,"CANCEL_TEXT"),this.__initOption("beginSideTitle",null,"BEGIN_SIDE_TITLE"),this.__initOption("endSideTitle",null,"END_SIDE_TITLE"),this.now=this.now||esui.config.NOW||new Date;var e,i,n=this.now;this.value&&(i=this.value.split(","),2==i.length&&(e={begin:baidu.date.parse(i[0]),end:baidu.date.parse(i[1])})),this.valueAsObject=e?e:this.valueAsObject||{begin:new Date(n),end:new Date(n)},this.__initOption("range",null,"RANGE"),this.view={begin:new Date(this.valueAsObject.begin),end:new Date(this.valueAsObject.end)}},esui.MultiCalendar.OK_TEXT="确定",esui.MultiCalendar.CANCEL_TEXT="取消",esui.MultiCalendar.BEGIN_SIDE_TITLE="开始日期",esui.MultiCalendar.END_SIDE_TITLE="结束日期",esui.MultiCalendar.DATE_FORMAT="yyyy-MM-dd",esui.MultiCalendar.VALUE_FORMAT="yyyy-MM-dd",esui.MultiCalendar.RANGE={begin:new Date(2001,8,3),end:new Date(2046,10,4)},esui.MultiCalendar.prototype={render:function(){var t=this,e=this.main;t._isRendered||(esui.InputControl.prototype.render.call(t),e.innerHTML=t._getMainHtml(),e.onclick=t._getMainClickHandler(),t._renderLayer(),t._isRendered=1),t.setValueAsObject(t.valueAsObject)},getValueAsObject:function(){return this.valueAsObject||null},getValue:function(){var t,e,i=this.valueAsObject,n=this.valueFormat;return i&&(t=i.begin)&&(e=i.end)?baidu.date.format(t,n)+","+baidu.date.format(e,n):""},setValueAsObject:function(t){t&&t.begin&&t.end&&(this.valueAsObject=t,this._controlMap.shortcut.setValueAsObject(t),this._repaintMain(t))},setValue:function(t){if(t=t.split(","),2==t.length){var e=baidu.date.parse(t[0]),i=baidu.date.parse(t[1]);e&&i&&this.setValueAsObject({begin:e,end:i})}},_tplMain:'<span id="{3}" class="{4}" style="display:none"></span><span id="{0}" class="{1}"></span><div class="{2}" arrow="1"></div>',_tplLayer:'<div ui="id:{0};type:MiniMultiCalendar"></div><div class="{1}">{5}{6}</div><div class="{2}"><div ui="type:Button;id:{3};skin:em">{7}</div><div ui="type:Button;id:{4}">{8}</div></div><div ui="type:Button;id:{9};skin:layerclose"></div>',_tplSide:'<div class="{0}"><div class="{1}"><b>{9}</b><span id="{2}"></span></div><div class="{4}"><table><tr><td width="40" align="left"><div ui="type:Button;id:{5};skin:back"></div></td><td><div ui="type:Select;id:{7};width:55"</td><td><div ui="type:Select;id:{8};width:40"</td><td width="40" align="right"><div ui="type:Button;id:{6};skin:forward"></div></td></tr></table></div><div ui="id:{3};type:MonthView"></div></div>',_getMainClickHandler:function(){var t=this;return function(){t.isDisabled()||(t.getLayer()._preventHide(),t.toggleLayer())}},_getCancelHandler:function(){var t=this;return function(){t.hideLayer()}},_getOkHandler:function(){function t(t){return e._controlMap[t+"monthview"].getValueAsDate()}var e=this;return baidu.date.parse,function(){var i,n=t("begin"),s=t("end"),a=s-n;i=a>0?{begin:n,end:s}:{begin:s,end:n},e.onchange(i,e.getShortcutText(i))!==!1&&(e.valueAsObject=i,e._controlMap.shortcut.setValueAsObject(i),e._repaintMain(i),e.hideLayer())}},onchange:new Function,_getMVCustomClass:function(){var t=this;return function(e){return t._isInRange(e)?"":this.__getClass("item-out")}},_getCalChangeHandler:function(t){var e=this;return function(i){if(!e._isInRange(i))return!1;e.tempValue[t]=i;var n=baidu.g(e.__getId(t+"title"));n.innerHTML=baidu.date.format(i,e.dateFormat)}},_isInRange:function(t){var e=this.range.begin,i=this.range.end;return e&&0>t-e||i&&0>i-t?!1:!0},_repaintMain:function(t,e){var i=e||this.getShortcutText(t),n=baidu.g(this.__getId("shortcuttext"));baidu.g(this.__getId("text")).innerHTML=this.getValueText(t),i&&(n.innerHTML=i),n.style.display=i?"":"none"},_repaintSide:function(t){var e=this,i=e.range,n=e.view[t],s=n.getFullYear(),a=n.getMonth(),o=e.tempValue[t],r=e._controlMap[t+"monthview"],l=e._controlMap[t+"month"],u=12*i.begin.getFullYear()+i.begin.getMonth(),d=12*i.end.getFullYear()+i.end.getMonth(),h=12*n.getFullYear()+n.getMonth(),c=baidu.g(e.__getId(t+"title"));l.datasource=e._getMonthOptions(s),l.render(),u-h>0?a+=u-h:h-d>0&&(a-=h-d),l.setValue(a),n.setMonth(a),e._controlMap[t+"year"].setValue(s),e._controlMap[t+"prevmonth"].setDisabled(u>=h),e._controlMap[t+"nextmonth"].setDisabled(h>=d),c.innerHTML=baidu.date.format(o,e.dateFormat),r.setValueAsDate(o),r.setView(n)},_getMainHtml:function(){var t=this,e="text",i="shortcuttext";return esui.util.format(t._tplMain,t.__getId(e),t.__getClass(e),t.__getClass("arrow"),t.__getId(i),t.__getClass(i))},_getLayerSideHtml:function(t){var e=this;return esui.util.format(e._tplSide,e.__getClass(t),e.__getClass("side-title"),e.__getId(t+"title"),e.__getId(t+"monthview"),e.__getClass("side-func"),e.__getId(t+"prevmonth"),e.__getId(t+"nextmonth"),e.__getId(t+"year"),e.__getId(t+"month"),e[t+"SideTitle"])},_renderLayer:function(){var t=this,e=t.__getId("layer"),i=esui.util.create("Layer",{id:e,autoHide:"click",retype:t._type,partName:"layer",skin:t.skin});t._controlMap.layer=i,i.appendTo(),i.onhide=t._getLayerHideHandler(),i.main.innerHTML=esui.util.format(t._tplLayer,t.__getId("shortcut"),t.__getClass("body"),t.__getClass("foot"),t.__getId("ok"),t.__getId("cancel"),t._getLayerSideHtml("begin"),t._getLayerSideHtml("end"),t.okText,t.cancelText,t.__getId("close")),t._initLayerUI()},_getLayerHideHandler:function(){var t=this;return function(){t.removeState("active")}},_initLayerUI:function(){var t,e=this.getLayer(),i=this.__getId("ok"),n=this.__getId("cancel"),s=this.__getId("close"),a=this.__getId("beginmonth"),o=this.__getId("endmonth"),r=this.__getId("beginyear"),l=this.__getId("endyear"),u=this.__getId("beginprevmonth"),d=this.__getId("endprevmonth"),h=this.__getId("beginnextmonth"),c=this.__getId("endnextmonth"),_=this.__getId("beginmonthview"),g=this.__getId("endmonthview"),p=this.__getId("shortcut"),f={},m=this.view,v=m.begin,b=m.end,y=v.getFullYear(),C=b.getFullYear(),w=v.getMonth(),I=b.getMonth(),H=this._getYearOptions(),M=this._getMVCustomClass(),T=this.valueAsObject;f[_]={valueAsDate:T.begin,customClass:M},f[g]={valueAsDate:T.end,customClass:M},f[a]={datasource:this._getMonthOptions(y),value:w},f[o]={datasource:this._getMonthOptions(C),value:I},f[r]={datasource:H,value:y},f[l]={datasource:H,value:C},f[p]={options:this.shortcutOptions,valueAsObject:T},t=esui.util.init(e.main,f),i=t[i],n=t[n],s=t[s],a=t[a],o=t[o],r=t[r],l=t[l],u=t[u],d=t[d],h=t[h],c=t[c],_=t[_],g=t[g],p=t[p],this._controlMap.ok=i,this._controlMap.cancel=n,this._controlMap.close=s,this._controlMap.beginmonthview=_,this._controlMap.endmonthview=g,this._controlMap.beginmonth=a,this._controlMap.endmonth=o,this._controlMap.beginyear=r,this._controlMap.endyear=l,this._controlMap.beginprevmonth=u,this._controlMap.endprevmonth=d,this._controlMap.beginnextmonth=h,this._controlMap.endnextmonth=c,this._controlMap.shortcut=p,i.onclick=this._getOkHandler(),s.onclick=n.onclick=this._getCancelHandler(),r.onchange=this._getYearChangeHandler("begin"),l.onchange=this._getYearChangeHandler("end"),a.onchange=this._getMonthChangeHandler("begin"),o.onchange=this._getMonthChangeHandler("end"),u.onclick=this._getPrevMonthHandler("begin"),d.onclick=this._getPrevMonthHandler("end"),h.onclick=this._getNextMonthHandler("begin"),c.onclick=this._getNextMonthHandler("end"),_.onchange=this._getCalChangeHandler("begin"),g.onchange=this._getCalChangeHandler("end"),p.onchange=this._getShortcutChangeHandler()},_getShortcutChangeHandler:function(){var t=this;return function(e,i){t.onchange(e,i)!==!1&&(t.valueAsObject=e,t._repaintMain(e,i),t.hideLayer())}},_getYearChangeHandler:function(t){var e=this;return function(i){var n=e.view[t],s=n.getMonth();e._repaintMonthView(t,i,s),e.getLayer()._preventHide()}},_getMonthChangeHandler:function(t){var e=this;return function(i){var n=e.view[t],s=n.getFullYear();e._repaintMonthView(t,s,i),e.getLayer()._preventHide()}},_getPrevMonthHandler:function(t){var e=this;return function(){var i=e.view[t];i.setMonth(i.getMonth()-1),e._repaintMonthView(t,i.getFullYear(),i.getMonth())}},_getNextMonthHandler:function(t){var e=this;return function(){var i=e.view[t];i.setMonth(i.getMonth()+1),e._repaintMonthView(t,i.getFullYear(),i.getMonth())}},_getYearOptions:function(){for(var t=this.range,e=[],i=t.begin.getFullYear(),n=t.end.getFullYear();n>=i;i++)e.push({name:i,value:i});return e},_getMonthOptions:function(t){var e=this.range,i=[],n=0,s=11;for(t==e.begin.getFullYear()&&(n=e.begin.getMonth()),t==e.end.getFullYear()&&(s=e.end.getMonth());s>=n;n++)i.push({name:n+1,value:n});return i},_repaintMonthView:function(t,e,i){this.view[t]=new Date(e,i,1),this._repaintSide(t)},toggleLayer:function(){var t=this;this.getLayer().isShow()?t.hideLayer():t.showLayer()},hideLayer:function(){this.getLayer().hide(),this.removeState("active")},showLayer:function(){var t,e=this,i=e.main,n=baidu.dom.getPosition(i),s=baidu.page.getWidth(),a=e.getLayer(),o=a.main.offsetWidth,r=e.valueAsObject,l=n.top+i.offsetHeight-1;e.tempValue={begin:new Date(r.begin),end:new Date(r.end)},e.view={begin:new Date(r.begin),end:new Date(r.end)},e._repaintLayer(),t=s<n.left+o?n.left+i.offsetWidth-o:n.left,a.show(t,l),this.addState("active")},getLayer:function(){return this._controlMap.layer},_repaintLayer:function(){this._repaintSide("begin"),this._repaintSide("end")},getValueText:function(t){var e=t||this.getValueAsObject(),i=e.begin,n=e.end,s=this.dateFormat,a=baidu.date.format;return this._controlMap.shortcut,i&&n?a(i,s)+" 至 "+a(n,s):""},getShortcutText:function(t){var e=t||this.getValue(),i=this._controlMap.shortcut;return e.begin&&e.end?i.getName(t?e:null):""},__dispose:function(){this.onchange=null,esui.InputControl.prototype.__dispose.call(this)}},baidu.inherits(esui.MultiCalendar,esui.InputControl),esui.Pager=function(t){this._type="pager",this._autoState=0,esui.Control.call(this,t),this.startNumber=parseInt(this.startNumber,10)||0,this.__initOption("prevText",null,"PREV_TEXT"),this.__initOption("nextText",null,"NEXT_TEXT"),this.__initOption("omitText",null,"OMIT_TEXT"),this.showCount=parseInt(this.showCount,10)||esui.Pager.SHOW_COUNT},esui.Pager.SHOW_COUNT=5,esui.Pager.OMIT_TEXT="…",esui.Pager.NEXT_TEXT='<span class="ui-pager-pntext">下一页</span><span class="ui-pager-icon"></span>',esui.Pager.PREV_TEXT='<span class="ui-pager-icon"></span><span class="ui-pager-pntext">上一页</span>',esui.Pager.prototype={getPage:function(){return this.page},render:function(){var t=this;esui.Control.prototype.render.call(t),t.total=parseInt(t.total,10)||0,t.page=parseInt(t.page,10)||0,this._renderPages()},_tplMain:"<ul>{0}</ul>",_tplItem:'<li onclick="{2}" onmouseover="{3}" onmouseout="{4}" class="{1}">{0}</li>',_renderPages:function(){var t,e,i=this,n=[],s=i.total,a=this.startNumber,o=s+a-1,r=i.page+a,l=i.__getClass("item"),u=i.__getClass("disabled"),d=i.__getClass("prev"),h=i.__getClass("next"),c=i._getInfoHtml(i.omitText,i.__getClass("omit"));if(0>=s)return this.main.innerHTML="",void 0;for(e=r<i.showCount-1?0:r>s-i.showCount?s-i.showCount:r-Math.floor(i.showCount/2),0>e&&(e=0),r>0?n.push(i._getItemHtml(i.prevText,d,i.__getStrCall("_setPage",r-1))):n.push(i._getInfoHtml(i.prevText,d+" "+u)),e>0&&n.push(i._getItemHtml(1,l,this.__getStrCall("_setPage",0)),c),t=0;t<i.showCount&&s>e+t;t++)e+t!=r?n.push(i._getItemHtml(1+e+t,l,i.__getStrCall("_setPage",e+t))):n.push(i._getInfoHtml(1+e+t,l+" "+i.__getClass("selected")));e<s-i.showCount&&n.push(c,i._getItemHtml(s,l,i.__getStrCall("_setPage",o))),o>r?n.push(i._getItemHtml(i.nextText,h,i.__getStrCall("_setPage",r+1))):n.push(i._getInfoHtml(i.nextText,h+" "+u)),this.main.innerHTML=esui.util.format(i._tplMain,n.join(""))},_getItemHtml:function(t,e,i){var n=this,s=n.__getStrRef(),a=s+"._itemOverHandler(this)",o=s+"._itemOutHandler(this)";return esui.util.format(n._tplItem,t,e,i,a,o)},_getInfoHtml:function(t,e){return esui.util.format(this._tplItem,t,e,"","","")},onchange:new Function,_setPage:function(t){this.onchange(t)!==!1&&this.setPage(t)},setPage:function(t){this.page=t,this._renderPages()},_itemOverHandler:function(t){baidu.addClass(t,this.__getClass("hover"))},_itemOutHandler:function(t){baidu.removeClass(t,this.__getClass("hover"))}},baidu.inherits(esui.Pager,esui.Control),esui.Region=function(t){this._type="region",this._autoState=0,esui.InputControl.call(this,t),this._initDatasource(this.datasource),"single"!=this.mode&&(this.mode="multi");var e=this.valueAsRaw||this.value;"multi"==this.mode&&("string"==typeof e?e=e.split(","):e instanceof Array||(e=[])),this.valueAsRaw=e},esui.Region.prototype={render:function(){if(!this._isRendered){switch(esui.InputControl.prototype.render.call(this),this.mode){case"multi":this._initMulti();break;case"single":this._initSingle()}this._isRendered=1}},getValue:function(){return"multi"==this.mode?this.valueAsRaw.join(","):this.valueAsRaw},setValue:function(t){this.valueAsRaw=t,"multi"==this.mode?this._selectMulti(t.split(",")):this._controlMap.select.setValue(t)},setDisabled:function(t){if(t=!!t,"multi"==this.mode){for(var e,i=this.main.getElementsByTagName("input"),n=i.length;n--;)e=i[n],"checkbox"==e.type&&(e.disabled=t);this._updateMulti()}else this._controlMap.select.setDisabled(t);this[t?"addState":"removeState"]("disabled"),this.disabled=t},disable:function(){this.setDisabled(!0)},enable:function(){this.setDisabled(!1)},_initMulti:function(){var t,e=this.datasource,i=e.length,n=[];for(t=0;i>t;t++)n.push(this._getOptionHtml(e[t],0));this.main.innerHTML=n.join(""),this._selectMulti(this.valueAsRaw)},_selectMulti:function(t){this.valueAsRaw=t;for(var e,i=t.length,n={};i--;)n[t[i]]=1;for(e in this._dataMap)this._getOption(e).checked=e in n;this._updateMulti()},_updateMulti:function(t,e){t=t||{children:this.datasource},e||(this.valueAsRaw=[]);var i,n,s=t.children,a=s instanceof Array&&s.length,o=!0,r=t.id&&this._getOption(t.id);if(a){for(i=0;a>i;i++)n=this._updateMulti(s[i],1),o=o&&n;return r&&(r.checked=o),o}return o=r.checked,o&&this.valueAsRaw.push(t.id),o},_tplOption:'<dt class="{3}"><input type="checkbox" value="{0}" optionId="{0}" id="{2}" onclick="{4}" level="{5}"><label for="{2}">{1}</label></dt>',_getOptionHtml:function(t,e){var i,n=t.id,s=[],a=this.__getClass("option-body"),o=this.__getClass("option-children"),r=[],l=t.children,u=l instanceof Array&&l.length;if(s.push(this.__getClass("option"),this.__getClass("option-"+n),this.__getClass("option-level"+e)),r.push('<dl class="'+s.join(" ")+'">',esui.util.format(this._tplOption,n,t.text,this.__getId("option_"+n),a,this.__getStrRef()+"._optionClick(this)",e)),u){for(r.push('<dd class="'+o+'">'),i=0;u>i;i++)r.push(this._getOptionHtml(l[i],e+1));r.push("</dd>")}return r.push("</dl>"),r.join("")},_optionClick:function(t,e){var i,n,s=t.getAttribute("optionId"),a=this._dataMap[s],o=t.checked,r=a.children,l=r instanceof Array&&r.length;if(l)for(;l--;)i=r[l],n=this._getOption(i.id),n.checked=o,this._optionClick(n,1);e||this._updateMulti()},_getOption:function(t){return baidu.g(this.__getId("option_"+t))},_initDatasource:function(t){function e(t,i){var n,s,a=t instanceof Array&&t.length;if(a)for(n=0;a>n;n++)s=baidu.object.clone(t[n]),s.parent=i,this._dataMap[s.id]=s,e.call(this,s.children,s)}this.datasource=t||esui.Region.REGION_LIST,this._dataMap={},t=this.datasource,e.call(this,t,{children:t})},_initSingle:function(){var t=this,e={id:t.__getId("region"),datasource:t._singleDataAdapter(),value:t.valueAsRaw,width:100},i=esui.util.create("Select",e);i.appendTo(t.main),i.onchange=t._getSelectChangeHandler(),t._controlMap.select=i},_getSelectChangeHandler:function(){var t=this;return function(e){t.valueAsRaw=t.value=e}},_singleDataAdapter:function(){function t(i){var n,s,a=i.children,o=!!a;if(i.id&&e.push({name:i.text,value:i.id,disabled:o}),o)for(s=0,n=a.length;n>s;s++)t(a[s])}var e=[];return t({children:this.datasource}),e}},baidu.inherits(esui.Region,esui.InputControl),esui.Region.REGION_LIST=[{id:"China",text:"中国地区",children:[{id:"North",text:"华北地区",children:[{id:"1",text:"北京"},{id:"3",text:"天津"},{id:"13",text:"河北"},{id:"26",text:"山西"},{id:"22",text:"内蒙古"}]},{id:"NorthEast",text:"东北地区",children:[{id:"21",text:"辽宁"},{id:"18",text:"吉林"},{id:"15",text:"黑龙江"}]},{id:"East",text:"华东地区",children:[{id:"2",text:"上海"},{id:"19",text:"江苏"},{id:"32",text:"浙江"},{id:"9",text:"安徽"},{id:"5",text:"福建"},{id:"20",text:"江西"},{id:"25",text:"山东"}]},{id:"Middle",text:"华中地区",children:[{id:"14",text:"河南"},{id:"16",text:"湖北"},{id:"17",text:"湖南"}]},{id:"South",text:"华南地区",children:[{id:"4",text:"广东"},{id:"8",text:"海南"},{id:"12",text:"广西"}]},{id:"SouthWest",text:"西南地区",children:[{id:"33",text:"重庆"},{id:"28",text:"四川"},{id:"10",text:"贵州"},{id:"31",text:"云南"},{id:"29",text:"西藏"}]},{id:"NorthWest",text:"西北地区",children:[{id:"27",text:"陕西"},{id:"11",text:"甘肃"},{id:"24",text:"青海"},{id:"23",text:"宁夏"},{id:"30",text:"新疆"}]},{id:"Other",text:"其他地区",children:[{id:"34",text:"香港"},{id:"36",text:"澳门"},{id:"35",text:"台湾"}]}]},{id:"Abroad",text:"国外",children:[{id:"7",text:"日本"},{id:"37",text:"其他国家"}]}],esui.Schedule=function(t){this._type="schedule",this._autoState=0,esui.InputControl.call(this,t),this._initValue(),this.__initOption("helpSelected",null,"HELP_SELECTED"),this.__initOption("help",null,"HELP"),this.__initOption("dayWords",null,"DAY_WORDS"),this.__initOption("shortcut",null,"SHORTCUT")},esui.Schedule.HELP_SELECTED="投放时间段",esui.Schedule.HELP="暂停时间段",esui.Schedule.DAY_WORDS=["星期一","星期二","星期三","星期四","星期五","星期六","星期日"],esui.Schedule.SHORTCUT=function(){function t(t){for(var e,i=0,n=Math.min(t.length,7);n>i;i++)e=baidu.g(this.__getId("lineState"+i)),e.checked=!!t[i],this._dayClick(e,!0)}return[{text:"全部时间",func:function(){t.call(this,[1,1,1,1,1,1,1]),this._refreshView(this)}},{text:"工作日",func:function(){t.call(this,[1,1,1,1,1,0,0]),this._refreshView(this)}},{text:"周末",func:function(){t.call(this,[0,0,0,0,0,1,1]),this._refreshView(this)}}]}(),esui.Schedule.prototype={setDisabled:function(t){t=!!t;var e,i,n,s="disabled";for(this.disabled=t,t?this.addState(s):this.removeState(s),t=this.getState(s),e=baidu.g(this.__getId("shortcut")),i=baidu.g(this.__getId("BodyHead")),i.style.display=e.style.display=t?"none":"",n=0;7>n;n++)baidu.g(this.__getId("lineState"+n)).disabled=t},disable:function(){this.setDisabled(!0)},enable:function(){this.setDisabled(!1)},getValueAsArray:function(){return this.valueAsArray},getValue:function(){var t,e,i=[],n=this.valueAsArray;for(t=0;7>t;t++)for(e=0;24>e;e++)i.push(n[t][e]);return i.join(",")},setValueAsArray:function(t){t instanceof Array&&7==t.length&&(this.valueAsArray=t,this._refreshView())},setValue:function(t){var e=this._parseValue(t);e&&this.setValueAsArray(e)},render:function(){this.isRendered||(esui.InputControl.prototype.render.call(this),this.main.innerHTML=esui.util.format(this._tpl,this.__getClass("head"),this.__getClass("body"),this.__getClass("help"),this.__getClass("help-selected"),this.__getClass("help-unselected"),this.__getClass("help-text"),this.__getClass("shortcut"),this.__getId("body"),this.helpSelected,this.help,this.__getId("shortcut"),this._getShortcutHtml()),this._initBody()),this.isRendered=1,this.setDisabled(this.disabled),this._refreshView()},_tpl:'<div class="{0}"><div class="{2}"><div class="{3}"></div><div class="{5}">{8}</div><div class="{4}"></div><div class="{5}">{9}</div></div><div class="{6}" id="{10}">{11}</div></div><div class="{1}" id="{7}"></div>',_initValue:function(){var t,e,i,n=this._parseValue(this.value),s=this.valueAsArray;if(n)s=n;else if(!this.valueAsArray)for(s=[],t=0;7>t;t++)for(i=[],s.push(i),e=0;24>e;e++)i.push(0);this.valueAsArray=s},_parseValue:function(t){t=(t||"").split(",");var e,i=null;if(168==t.length)for(i=[],e=0;7>e;e++)i.push(t.slice(24*e,24*(e+1)));return i},_getShortcutHtml:function(){var t,e,i=[],n=this.shortcut,s=n.length,a="&nbsp;|&nbsp;",o=this.__getClass("shortcut-item"),r='<span class="{0}" onclick="{2}">{1}</span>';for(t=0;s>t;t++)e=n[t],i.push(esui.util.format(r,o,e.text,this.__getStrCall("_doShortcut",t)));return i.join(a)},_doShortcut:function(t){var e=this.shortcut[t].func;"function"==typeof e&&e.call(this)},_initBody:function(){var t=this.__getStrRef(),e=this.dayWords,n=[],s=this.__getClass("line"),a=this.__getClass("day"),o=this.__getClass("seg"),r=this.__getClass("time"),l=this.__getClass("timehead"),u='</div><div class="'+o+'">',d='<div class="'+l+'" onmouseover="{2}" onmouseout="{3}" onclick="{4}" time="{1}" id="{0}">&nbsp;</div>',h="</div></div>",c='<div class="'+s+'" id="{0}">'+'<div class="'+a+'">'+'<input type="checkbox" id="{1}" value="{2}" onclick="{3}">'+'<label for="{1}">{4}</label>',_='<div class="'+r+'" onmouseover="{3}" onmouseout="{4}" onclick="{5}" time="{2}" day="{1}" timeitem="1" id="{0}">{2}</div>';
for(n.push('<div class="'+s+'" id="',this.__getId("BodyHead")+'">','<div class="'+a+'">&nbsp;',u),j=0;24>j;j++)j>0&&0==j%6&&n.push(u),n.push(esui.util.format(d,this.__getId("TimeHead"+j),j,t+"._timeHeadOverOut(this,1)",t+"._timeHeadOverOut(this)",t+"._timeHeadClick(this)"));for(n.push(h),i=0;7>i;i++){for(n.push(esui.util.format(c,this.__getId("line"+i),this.__getId("lineState"+i),i,t+"._dayClick(this)",e[i]),u),j=0;24>j;j++)j>0&&0==j%6&&n.push(u),n.push(esui.util.format(_,this.__getId("time_"+i+"_"+j),i,j,t+"._timeOverOut(this,1)",t+"._timeOverOut(this)",t+"._timeClick(this)"));n.push(h)}baidu.g(this.__getId("body")).innerHTML=n.join("")},_timeOverOut:function(t,e){var i=this.__getClass("time-hover");e?baidu.addClass(t,i):baidu.removeClass(t,i)},_timeHeadOverOut:function(t,e){var i=this.__getClass("timehead-hover");e?baidu.addClass(t,i):baidu.removeClass(t,i)},_timeClick:function(t){if(!this.isDisabled()){var e=parseInt(t.getAttribute("day"),10),i=parseInt(t.getAttribute("time"),10),n=!baidu.dom.hasClass(t,this.__getClass("time-selected"));this._selectTime(e,i,n)}},_timeHeadClick:function(t){var e,n=!baidu.dom.hasClass(t,this.__getClass("timehead-active")),s=parseInt(t.getAttribute("time"),10);for(i=0;7>i;i++)e=baidu.g(this.__getId("time_"+i+"_"+s)),this._selectTime(parseInt(e.getAttribute("day"),10),s,n,!0);this._refreshView()},_dayClick:function(t,e){for(var i,n=this,s=t.checked,a=t.parentNode.parentNode.getElementsByTagName("div"),o=a.length;o--;)i=a[o],this._isTimeDom(i)&&this._selectTime(parseInt(i.getAttribute("day"),10),parseInt(i.getAttribute("time"),10),s,!0);e||n._refreshView()},_refreshView:function(){var t=this;t.isDisabled();var e,i,n,s,a,o,r,l,u,d,h=t.valueAsArray,c=[],_=t.__getClass("timehead-active"),g=t.__getClass("time-selected"),p=baidu.g(t.__getId("BodyHead")).getElementsByTagName("div"),f=baidu.g(t.__getId("body")).getElementsByTagName("div"),m=f.length,v=0;for(n=0;24>n;n++)c.push(1);for(n=0;7>n;n++)for(r=baidu.g(t.__getId("line"+n)),l=r.getElementsByTagName("div"),s=l.length;s--;)u=l[s],t._isTimeDom(u)&&(u=parseInt(u.getAttribute("time"),10),d=h[n][u],d&&"0"!=d||(c[u]=0));for(s=p.length;s--;)e=p[s],i=/TimeHead([0-9]+)$/.exec(e.id),i&&2==i.length&&(c[parseInt(i[1],10)]?baidu.addClass(e,_):baidu.removeClass(e,_));for(;m--;)e=f[m],i=/time_([0-9]+)_([0-9]+)$/.exec(e.id),i&&3==i.length&&(u=h[parseInt(i[1],10)][parseInt(i[2],10)],u&&"0"!=u?baidu.addClass(e,g):baidu.removeClass(e,g));for(n=0;7>n;n++){for(a=h[n],o=!0,s=0;24>s;s++)a[s]&&"0"!=a[s]?v++:o=!1;baidu.g(t.__getId("lineState"+n)).checked=o}},_selectTime:function(t,e,i,n){var s=this.valueAsArray;s[t][e]=i?1:0,n||this._refreshView()},_isTimeDom:function(t){return!!t.getAttribute("timeitem")}},baidu.inherits(esui.Schedule,esui.InputControl),esui.SideBar=function(t){this._type="sidebar",this._autoState=0,esui.Control.call(this,t),this.headHeight=this.headHeight||37,this.marginTop=this.marginTop||10,this.marginLeft=this.marginLeft||10,this.marginBottom=this.marginBottom||10,this.__initOption("autoDelay",null,"AUTO_DELAY"),this.__initOption("mode",null,"MODE"),this._autoTimer=0},esui.SideBar.AUTO_DELAY=200,esui.SideBar.MODE="fixed",esui.SideBar.prototype={_initCtrlBtn:function(){var t=this,e=t.main,i=t._controlMap,n=esui.util.create("Button",{id:t.__getId("AutoHide"),skin:"autohide"}),s=esui.util.create("Button",{id:t.__getId("Fixed"),skin:"fixed"});n.appendTo(e),s.appendTo(e),i.btnAutoHide=n,i.btnFixed=s,n.onclick=this._getAutoHideClickHandler(),s.onclick=this._getFixedClickHandler(),this._setMode(this.mode)},onmodechange:new Function,_getFixedClickHandler:function(){var t=this;return function(){t._setMode("fixed"),t.onmodechange(t.mode)}},_getAutoHideClickHandler:function(){var t=this;return function(){t._setMode("autohide"),t.onmodechange(t.mode),t._hide()}},_setMode:function(t){t=t.toLowerCase();var e=this._getAutoHideMain(),i=this._getFixedMain(),n=this._getNeighbor(),s=this.__getClass("neighbor-hide");"fixed"==t?(baidu.hide(i),baidu.show(e)):(baidu.show(i),baidu.hide(e)),this.mode=t,this._isAutoHide()?baidu.addClass(n,s):(baidu.removeClass(n,s),this._hideMat()),this._repaintNeighbor()},_isAutoHide:function(){return"autohide"==this.mode},_getFixedMain:function(){return this._controlMap.btnFixed.main},_getAutoHideMain:function(){return this._controlMap.btnAutoHide.main},_initContent:function(){var t,e=this.main,i=baidu.dom.first(e);i&&(baidu.addClass(i,this.__getClass("head")),this._headEl=i,t=baidu.dom.next(i),t&&(this._bodyEl=t,baidu.addClass(t,this.__getClass("body"))))},_caching:function(){var t=this.main,e=t.parentNode,i=baidu.dom.getPosition(e),n=baidu.dom.getPosition(t);esui.util.hasValue(this._mOffsetTop)?this.top=i.top+this._mOffsetTop:(this._mOffsetTop=n.top-i.top,this.top=n.top,this.left=n.left)},render:function(){var t=this;t._isRendered||(esui.Control.prototype.render.call(t),t._caching(),baidu.addClass(t._getNeighbor(),t.__getClass("neighbor")),t._initContent(),t._renderMat(),t._renderMiniBar(),t._initCtrlBtn(),t.heightReseter=t._getHeightReseter(),t.topReseter=t._getTopReseter(),baidu.on(window,"resize",t.heightReseter),baidu.on(window,"scroll",t.topReseter),t.main.onmouseover=t._getMainOverHandler(),t.main.onmouseout=t._getMainOutHandler(),t._resetTop(),t._resetHeight(),t._isAutoHide()&&t._hide(),t._isRendered=1)},_renderMat:function(){var t=document.createElement("div");t.id=this.__getId("mat"),t.className=this.__getClass("mat"),document.body.appendChild(t)},refreshView:function(){this._caching(),this.heightReseter(),this.topReseter()},_getMainOverHandler:function(){var t=this;return function(){clearTimeout(t._autoTimer)}},_getMainOutHandler:function(){var t=this;return function(e){if(t._isAutoHide()){e=e||window.event;var i=e.relatedTarget||e.toElement;baidu.dom.contains(t.main,i)||t._autoHideBar()}}},_renderMiniBar:function(){var t=this,e=document.createElement("div"),i=[];t._headEl&&i.push('<div class="'+t.__getClass("minibar-text")+'">'+t._headEl.innerHTML+"</div>"),i.push('<div class="'+t.__getClass("minibar-arrow")+'"></div>'),e.innerHTML=i.join(""),e.id=t.__getId("MiniBar"),e.className=t.__getClass("minibar"),e.style.left="-10000px",e.style.top=t.top+"px",t._miniBar=e,e.onmouseover=t._getMiniOverHandler(),e.onmouseout=t._getMiniOutHandler(),document.body.appendChild(e)},_getMiniOverHandler:function(){var t=this,e=t.__getClass("minibar-hover");return function(){baidu.dom.hasClass(this,e)||(baidu.addClass(this,e),t._autoTimer=setTimeout(function(){t._hideMiniBar()},t.autoDelay))}},_getMiniOutHandler:function(){var t=this;return function(){baidu.removeClass(this,t.__getClass("minibar-hover")),clearTimeout(t._autoTimer)}},_resetHeight:function(){var t,e=this,i=baidu.page,n=baidu.dom.getPosition(e.main),s=i.getScrollTop(),a=i.getViewHeight();a=a?a-n.top+s-e.marginTop:300,0>a&&(a=300),t=a-e.headHeight,this.bodyHeight=t,this.height=a,e._getMat().style.height=a+2*e.marginTop+"px",e.main.style.height=e._miniBar.style.height=a+"px",e._bodyEl&&(e._bodyEl.style.height=t+"px"),this.onresize()},onresize:new Function,_getHeightReseter:function(){var t=this;return function(){t._resetHeight()}},_resetTop:function(){var t,e,i=this,n=i.marginTop,s=baidu.page.getScrollTop(),a=i.main,o=i._getMat(),r=i._miniBar,l=i.top,u="absolute",d="absolute";baidu.ie&&baidu.ie<7?s>l-n?t=e=s-l+i.top:(t=e=l,i._resetHeight()):s>l-n?(d=u="fixed",t=e=n):(t=e=l,i._resetHeight()),o.style.top=t-i.marginTop+"px",a.style.top=t+"px",o.style.position=a.style.position=u,r.style.top=e+"px",r.style.position=d,setTimeout(function(){i._resetHeight()},200)},_getTopReseter:function(){var t=this;return function(){t._resetTop()}},_hideMat:function(){this._getMat().style.left="-10000px"},_show:function(){function t(){e._getMat().style.left=0,e.main.style.left=i+"px",e._isAutoHide()&&e._autoHideBar()}var e=this,i=10;t()},_hide:function(){function t(t){e._getMat().style.left="-10000px",e.main.style.left=i+"px",e._showMiniBar(t)}var e=this,i=-220;t()},_autoHideBar:function(){var t=this;clearTimeout(t._autoTimer),t._autoTimer=setTimeout(function(){var e=baidu.page.getMousePosition(),i=baidu.dom.getPosition(t.main),n=t.main;(e.x>i.left+n.offsetWidth||e.y<i.top||e.y>i.top+n.offsetHight)&&t._hide()},t.autoDelay)},_showMiniBar:function(t){function e(){i._miniBar.style.left=n+"px"}var i=this,n=0;return t?(e(),void 0):(e(),void 0)},_hideMiniBar:function(){function t(){e._miniBar.style.left=i+"px",e._show()}var e=this,i=-30;t()},_repaintNeighbor:function(){var t,e,i=esui.util.getControlsByContainer(this._getNeighbor()),n=i.length;for(t=0;n>t;t++)e=i[t],e.refreshView?e.refreshView():e.render()},_getNeighbor:function(){return baidu.dom.next(this.main)},_getMat:function(){return baidu.g(this.__getId("mat"))},__dispose:function(){var t=this,e=t._getMat();baidu.un(window,"resize",t.heightReseter),baidu.un(window,"scroll",t.topReseter),document.body.removeChild(t._miniBar),document.body.removeChild(e),t._headEl=null,t._bodyEl=null,t._miniBar=null,esui.Control.prototype.__dispose.call(this)}},baidu.inherits(esui.SideBar,esui.Control),esui.Tab=function(t){this._type="tab",this._autoState=0,esui.Control.call(this,t),this.activeIndex=this.activeIndex||0,this.allowEdit=!!this.allowEdit,this.maxCount=this.maxCount||esui.Tab.MAX_COUNT||5},esui.Tab.prototype={render:function(){var t=this;esui.Control.prototype.render.call(t),this.tabs=this.datasource||this.tabs||[],t._renderTabs()},_tplItem:'<li class="{1}"{2}><em>{0}</em>{3}</li>',_tplAdd:'<li class="add" onclick="{0}">+</li>',_tplClose:'<span onclick="{0}"></span>',_renderTabs:function(){var t,e,i,n,s,a,o=this,r=o.main,l=o.tabs,u=l.length,d=o.__getClass("item"),h=[];if(0==u)return r.innerHTML="",void 0;for(u<=o.activeIndex?o.activeIndex=0:o.activeIndex<0&&(o.activeIndex=0),e=0;u>e;e++)i=o.tabs[e],n=i.title,t=d,s="",a="",o.allowEdit&&!i.stable&&(s=esui.util.format(o.tplClose,o.__getStrCall("_close",e))),0==e&&(t+=" "+o.__getClass("item-first")),e==u-1&&(t+=" "+o.__getClass("item-last")),e==o.activeIndex?t+=" "+o.__getClass("item-active"):a=' onclick="'+o.__getStrCall("_select",e)+'"',h.push(esui.util.format(o._tplItem,n,t,a,s));r.innerHTML="<ul>"+h.join("")+"</ul>",o._resetPanel()},_resetPanel:function(){var t,e,i=this.tabs,n=i.length,s=this.activeIndex;for(t=0;n>t;t++)e=i[t].panel,e&&(baidu.g(e).style.display=t==s?"":"none")},onchange:new Function,_select:function(t){this.onchange(t,this.tabs[t])!==!1&&this.setActiveIndex(t)},setActiveIndex:function(t){this.activeIndex=t,this._renderTabs()},onclose:new Function,_close:function(t){this.onclose(t,this.tabs[t])!==!1&&this.remove(t)},remove:function(t){var e=this.tabs;e.splice(t,1),this.activeIndex>=e.length&&this.activeIndex--,this.activeIndex<0&&(this.activeIndex=0),this._renderTabs()},add:function(t){t=t||{title:"新建标签"},this.tabs.push(t),this._renderTabs()}},baidu.inherits(esui.Tab,esui.Control),esui.TextInput=function(t){this._autoState=1,esui.InputControl.call(this,t),this.value=this.value||"",this.mode&&"textarea"!=this.mode&&"password"!=this.mode&&(this.mode="text")},esui.TextInput.prototype={setTitle:function(t){this.main.setAttribute("title",t)},disable:function(){this.main.disabled=!0,esui.InputControl.prototype.disable.call(this)},enable:function(){this.main.disabled=!1,esui.InputControl.prototype.enable.call(this)},setReadOnly:function(t){t=!!t,this.main.readOnly=t,this.readOnly=t,t?this.addState("readonly"):this.removeState("readonly")},setHeight:function(t){this.height=t,t&&(this.main.style.height=t+"px")},setWidth:function(t){this.width=t,t&&(this.main.style.width=t+"px")},select:function(){this.main.select()},getValue:function(){var t=this.main.value;return this._placing?"":t},setValue:function(t){t=t||"";var e=this.main,i=this.__getClass("virtual"),n=this.placeholder;this._removeInputListener(),e.value=t,t?(this._placing=0,baidu.removeClass(e,i)):n&&(this._placing=1,e.value=n,baidu.addClass(e,i)),this._addInputListener()},render:function(){var t=this,e=t.main;t._isRendered||(esui.InputControl.prototype.render.call(t),e.onkeypress=t._getPressHandler(),t._addInputListener(),e.onmousedown=null,e.onmouseup=null,e.onfocus=t._getFocusHandler(),e.onblur=t._getBlurHandler(),t._isRendered=1),t.setReadOnly(!!t.readOnly),t.setDisabled(!!t.disabled),t.setWidth(t.width),t.setHeight(t.height),t.setValue(t.value)},_addInputListener:function(){var t=this.main,e=this._changeHandler;e||(e=this._getChangeHandler(),this._changeHandler=e),baidu.ie?t.onpropertychange=e:baidu.on(t,"input",e)},_removeInputListener:function(){var t=this._changeHandler,e=this.main;baidu.ie?e.onpropertychange=null:t&&baidu.un(e,"input",t)},onfocus:new Function,_getFocusHandler:function(){var t=this;return function(){var e=t.main;baidu.removeClass(e,t.__getClass("virtual")),t._placing&&(e.value=""),t.autoSelect&&e.select(),t.onfocus()}},onblur:new Function,_getBlurHandler:function(){var t=this;return function(){t.setValue(t.main.value),t.onblur()}},onenter:new Function,_getPressHandler:function(){var t=this;return function(e){e=e||window.event;var i=e.keyCode||e.which;if("text"==t._type)return 13==i?t.onenter():void 0}},onchange:new Function,_getChangeHandler:function(){var t=this;return function(){baidu.ie?"value"==window.event.propertyName&&t.onchange():t.onchange()}},__construct:function(){esui.InputControl.prototype.__construct.call(this);var t=this,e=t.main,i=e.tagName,n=e.getAttribute("type"),s="";switch(i){case"TEXTAREA":s="textarea";break;case"INPUT":switch(n){case"text":case"password":s=n}}if(!s)throw new Error("esui.TextInput: invalid main element!");t.mode=t.mode||s,t._type="textarea"==t.mode?"textarea":"text",t.value=t.value||e.value,t.placeholder=t.placeholder||e.getAttribute("placeholder"),e.setAttribute("placeholder","")},__dispose:function(){var t=this.main;t.onkeypress=null,t.onchange=null,t.onfocus=null,t.onblur=null,this._removeInputListener(),this._changeHandler=null,esui.InputControl.prototype.__dispose.call(this)},__createMain:function(){var t=esui.InputControl.prototype.__createInput,e=this.mode;return e=e||"text","text"==e||"password"==e?t.call(this,{tagName:"input",name:this.name,type:e}):t.call(this,{tagName:"textarea",name:this.name})}},baidu.inherits(esui.TextInput,esui.InputControl),esui.Table=function(t){this._type="table",this._autoState=0,esui.Control.call(this,t),this.__initOption("noDataHtml",null,"NODATA_HTML"),this.__initOption("followHead",null,"FOLLOW_HEAD"),this.__initOption("sortable",null,"SORTABLE"),this.__initOption("columnResizable",null,"COLUMN_RESIZABLE"),this.__initOption("rowWidthOffset",null,"ROW_WIDTH_OFFSET"),this.__initOption("subrowMutex",null,"SUBROW_MUTEX"),this.__initOption("subEntryOpenTip",null,"SUBENTRY_OPEN_TIP"),this.__initOption("subEntryCloseTip",null,"SUBENTRY_CLOSE_TIP"),this.__initOption("subEntryWidth",null,"SUBENTRY_WIDTH"),this.__initOption("breakLine",null,"BREAK_LINE"),this._followHeightArr=[0,0],this._followWidthArr=[]},esui.Table.NODATA_HTML="",esui.Table.FOLLOW_HEAD=0,esui.Table.SORTABLE=0,esui.Table.COLUMN_RESIZABLE=0,esui.Table.ROW_WIDTH_OFFSET=-1,esui.Table.SUBROW_MUTEX=1,esui.Table.SUBENTRY_OPEN_TIP="点击展开",esui.Table.SUBENTRY_CLOSE_TIP="点击收起",esui.Table.SUBENTRY_WIDTH=18,esui.Table.BREAK_LINE=0,esui.Table.prototype={_initFields:function(){if(this.fields){for(var t=this.fields,e=t.slice(0),i=e.length;i--;)e[i]||e.splice(i,1);if(this._fields=e,this.select)switch(this.select.toLowerCase()){case"multi":e.unshift(this.FIELD_MULTI_SELECT);break;case"single":e.unshift(this.FIELD_SINGLE_SELECT)}}},getBody:function(){return baidu.g(this.__getId("body"))},getHead:function(){return baidu.g(this.__getId("head"))},getFoot:function(){return baidu.g(this.__getId("foot"))},_getRow:function(t){return baidu.g(this.__getId("row")+t)},_getHeadCheckbox:function(){return baidu.g(this.__getId("selectAll"))},_getWidth:function(){if(this.width)return this.width;var t,e=this,i=document.createElement("div"),n=e.main.parentNode;return n.appendChild(i),t=i.offsetWidth,n.removeChild(i),t},_tplTablePrefix:'<table cellpadding="0" cellspacing="0" width="{0}" controlTable="{1}">',_caching:function(){this.followHead&&this._cachingFollowHead()},_cachingFollowHead:function(){function t(t,e){var i=baidu.dom.getStyle(t,e);return""==i?0:+i.replace("px","")}var e=this,i=e._followDoms;if(!i){i=[],e._followDoms=i;for(var n,s,a,o=e.main.parentNode.firstChild,r=e._followWidthArr,l=e._followHeightArr;o;)1==o.nodeType&&o.getAttribute("followThead")&&i.push(o),o=o.nextSibling;for(l[0]=0,s=0,a=i.length;a>s;s++)n=i[s],r[s]=t(n,"padding-left")+t(n,"padding-right")+t(n,"border-left")+t(n,"border-right"),l[s+1]=l[s]+n.offsetHeight;l[s+1]=l[s],l.lenght=s+2}e._followTop=baidu.dom.getPosition(i[0]||e.main).top},render:function(){var t=this,e=t.main;if(t._initFields(),t._fields){if(esui.Control.prototype.render.call(this),t._isInited||t._initMinColsWidth(),t._subrowIndex=null,t._width=t._getWidth(),e.style.width=t._width+"px",t._initColsWidth(),t.stopEdit(),t._renderHead(),t._renderBody(),t._renderFoot(),t._isInited)switch(t.select){case"multi":t.onselect([])}else t._caching(),t._initResizeHandler(),t._initTopResetHandler(),t._isInited=1;t._width!=t._getWidth()&&t._handleResize()}},onselect:new Function,_initMinColsWidth:function(){var t,e,i,n=this,s=n._fields,a=s.length,o=[];if(n.noHead)for(i=0;a>i;i++)o[i]=40;else for(i=0;a>i;i++)t=s[i],e=t.minWidth,e||t.breakLine||(e=13*t.title.length+20),o[i]=e;n._minColsWidth=o},_initColsWidth:function(){var t,e,i,n,s,a,o,r,l=this,u=l._fields,d=u.length,h=[],c=0;for(l._colsWidth=[],e=l._width-1,c=d,r=0;d>r;r++)i=u[r],s=i.width,s=s?parseInt(s,10):0,l._colsWidth.push(s),e-=s,i.stable||h.push(r);for(d=h.length,t=Math.round(e/d),r=0;d>r;r++)a=h[r],n=Math.abs(e)<Math.abs(t)?e:t,e-=n,l._colsWidth[a]+=n,o=l._minColsWidth[a],o>l._colsWidth[a]&&(e+=l._colsWidth[a]-o,l._colsWidth[a]=o);if(0>e)for(r=0;d>r&&0!=e;)a=h[r],o=l._minColsWidth[a],o<l._colsWidth[a]&&(n=l._colsWidth[h[r]]-o,n=n>Math.abs(e)?e:-n,e+=Math.abs(n),l._colsWidth[a]+=n),r++;else e>0&&(l._colsWidth[h[0]]+=e)},_renderFoot:function(){var t=this,e="foot",i=t.__getId(e),n=baidu.g(i);t.foot instanceof Array?(n||(n=document.createElement("div"),n.id=i,n.className=t.__getClass(e),n.setAttribute("controlTable",t.id),t.main.appendChild(n)),n.style.display="",n.style.width=t._width+"px",n.innerHTML=t._getFootHtml()):n&&(n.style.display="none")},_getFootHtml:function(){var t,e,i,n,s,a,o,r=[],l=this.foot,u=l.length,d=0,h=this._colsWidth,c=this.__getClass("fcell"),_=this.__getClass("fcell-text");for(r.push(esui.util.format(this._tplTablePrefix,"100%",this.id)),t=0;u>t;t++){for(n=l[t],e=h[d],s=n.colspan||1,a=[c],o=n.content,"function"==typeof o&&(o=o.call(this)),o=o||"&nbsp;",i=1;s>i;i++)e+=h[d+i];d+=s,n.align&&a.push(this.__getClass("cell-align-"+n.align)),e+=this.rowWidthOffset,0>e&&(e=0),r.push('<th id="'+this._getFootCellId(t)+'" class="'+a.join(" ")+'"',' style="width:'+e+"px;",(e?"":"display:none;")+'">','<div class="'+_+'">',o,"</div></th>")}return r.push("</tr></table>"),r.join("")},_renderHead:function(){var t=this,e="head",i=t.__getId(e),n=baidu.g(i);t.noHead||(n||(n=document.createElement("div"),n.id=i,n.className=t.__getClass(e),n.setAttribute("controlTable",t.id),t.columnResizable&&(n.onmousemove=t._getHeadMoveHandler(),n.onmousedown=t._getDragStartHandler()),t.main.appendChild(n)),n.style.width=t._width+"px",n.innerHTML=t._getHeadHtml())},_getHeadHtml:function(){function t(t){return _.sortable&&t.sortable?esui.util.format(' onmouseover="{0}" onmouseout="{1}" onclick="{2}" sortable="1"',_.__getStrRef()+"._titleOverHandler(this)",_.__getStrRef()+"._titleOutHandler(this)",_.__getStrRef()+"._titleClickHandler(this)"):""}var e,i,n,s,a,o,r,l,u,d,h,c,_=this,g=this._fields,p=g.length,f=[],m=_.__getClass("hcell"),v=_.__getClass("hcell-text"),b=_.__getClass("cell-break"),y=_.__getClass("hsort"),C=_.__getClass("hcell-sel");for(_.__getClass("hhelp"),e=0;p>e;e++)if(!g[e].stable){s=e;break}for(e=p-1;e>=0;e--)if(!g[e].stable){a=e;break}for(f.push(esui.util.format(_._tplTablePrefix,"100%",_.id)),f.push("<tr>"),e=0;p>e;e++)l=[m],i=g[e],n=i.title,h=_.sortable&&i.sortable,u=h&&i.field&&i.field==_.orderBy,d="",r="",h&&(l.push(_.__getClass("hcell-sort")),u&&l.push(_.__getClass("hcell-"+_.order)),d=esui.util.format(_._tplSortIcon,y)),i.align&&l.push(_.__getClass("cell-align-"+i.align)),(esui.Table.BREAK_LINE||_.breakLine||i.breakLine)&&l.push(b),o="function"==typeof n?n.call(_):n,o=o||"&nbsp;",f.push('<th id="'+this._getTitleCellId(e)+'" index="'+e+'"',' class="'+l.join(" ")+'"',t(i,e),e>=s&&a>e?' dragright="1"':"",a>=e&&e>s?' dragleft="1"':"",' style="width:'+(_._colsWidth[e]+_.rowWidthOffset)+"px;",(_._colsWidth[e]?"":"display:none")+'">','<div class="'+v+(i.select?" "+C:"")+'">',o,d,c,"</div></th>");return f.push("</tr></table>"),f.join("")},_tplSortIcon:'<div class="{0}"></div>',_tplTipIcon:'<div class="{0}" {1}></div>',_getTitleCellId:function(t){return this.__getId("titleCell")+t},_getFootCellId:function(t){return this.__getId("footCell")+t},_titleOverHandler:function(t){this._isDraging||this._dragReady||(this._sortReady=1,baidu.addClass(t,this.__getClass("hcell-hover")))},_titleOutHandler:function(t){this._sortReady=0,baidu.removeClass(t,this.__getClass("hcell-hover"))},onsort:new Function,_titleClickHandler:function(t){if(this._sortReady){var e=this,i=e._fields[t.getAttribute("index")],n=e.orderBy,s=e.order;s=n==i.field?s&&"asc"!=s?"asc":"desc":"desc",e.onsort(i,s),e.order=s,e.orderBy=i.field,e._renderHead()}},_getHeadMoveHandler:function(){var t=this,e=t.__getClass("startdrag"),i=8;return function(n){if(!t._isDraging){n=n||window.event;var s,a,o,r=n.srcElement||n.target,l=baidu.page,u=n.pageX||n.clientX+l.getScrollLeft();r=t._findDragCell(r),r&&(s=baidu.dom.getPosition(r),a=r.getAttribute("index"),o=r.getAttribute("sortable"),r.getAttribute("dragleft")&&u-s.left<i?(o&&t._titleOutHandler(r),baidu.addClass(this,e),t._dragPoint="left",t._dragReady=1):r.getAttribute("dragright")&&s.left+r.offsetWidth-u<i?(o&&t._titleOutHandler(r),baidu.addClass(this,e),t._dragPoint="right",t._dragReady=1):(baidu.removeClass(this,e),o&&t._titleOverHandler(r),t._dragPoint="",t._dragReady=0))}}},_findDragCell:function(t){for(;1==t.nodeType;){if("TH"==t.tagName)return t;t=t.parentNode}return null},_getDragStartHandler:function(){var t=this,e=t.__getClass("startdrag");return function(i){i=i||window.event;var n=i.target||i.srcElement;return n=t._findDragCell(n),!n||baidu.g(t.__getId("head")).className.indexOf(e)<0?void 0:(t._htmlHeight=document.documentElement.clientHeight,t._isDraging=!0,t._dragIndex=n.getAttribute("index"),t._dragStart=i.pageX||i.clientX+baidu.page.getScrollLeft(),document.onmousemove=t._getDragingHandler(),document.onmouseup=t._getDragEndHandler(),t._showDragMark(t._dragStart),baidu.event.preventDefault(i),!1)}},_getDragingHandler:function(){var t=this;return function(e){return e=e||window.event,t._showDragMark(e.pageX||e.clientX+baidu.page.getScrollLeft()),baidu.event.preventDefault(e),!1}},_showDragMark:function(t){var e=this,i=e._getDragMark();e.top||(e.top=baidu.dom.getPosition(e.main).top),i||(i=e._createDragMark()),i.style.top=e.top+"px",i.style.left=t+"px",i.style.height=e._htmlHeight-e.top+baidu.page.getScrollTop()+"px"},_hideDragMark:function(){var t=this._getDragMark();t.style.left="-10000px",t.style.top="-10000px"},_createDragMark:function(){var t=document.createElement("div");return t.id=this.__getId("dragMark"),t.className=this.__getClass("mark "),t.style.top="-10000px",t.style.left="-10000px",document.body.appendChild(t),t},_getDragMark:function(){return baidu.g(this.__getId("dragMark"))},_getDragEndHandler:function(){var t=this;return function(e){e=e||window.event;var i,n,s,a,o,r,l,u,d,h,c=parseInt(t._dragIndex,10),_=e.pageX||e.clientX+baidu.page.getScrollLeft(),g=t._fields,p=g.length,f=[],m=[],v=0,b=t._colsWidth,y=0;for("left"==t._dragPoint&&c--,i=t._minColsWidth[c],n=_-t._dragStart,d=b[c]+n,i>d&&(n+=i-d,d=i),l=c+1;p>l;l++)!g[l].stable&&b[l]>0&&(f.push(l),o=b[l],m.push(o),v+=o);for(r=n,a=f.length,l=0;a>l;l++)s=f[l],o=m[l],h=n*o/v,u=r>0?Math.ceil(h):Math.floor(h),u=Math.abs(u)<Math.abs(r)?u:r,o-=u,r-=u,i=t._minColsWidth[s],i>o&&(y+=i-o,o=i),b[s]=o;return d-=y,b[c]=d,t._resetColumns(),document.onmousemove=null,document.onmouseup=null,t._isDraging=!1,t._hideDragMark(),baidu.event.preventDefault(e),!1}},_renderBody:function(){var t,e=this,i="body",n=e.__getId(i),s=baidu.g(n);s||(s=document.createElement("div"),s.id=n,s.className=e.__getClass(i),e.bodyHeight&&(t=s.style,t.height=e.bodyHeight+"px",t.overflowX="hidden",t.overflowY="auto"),e.main.appendChild(s)),s.style.width=e._width+"px",s.innerHTML=e._getBodyHtml()},_getBodyHtml:function(){var t,e,i=this.datasource||[],n=i.length,s=[];if(!n)return this.noDataHtml;for(t=0;n>t;t++)e=i[t],s[t]=this._getRowHtml(e,t);return s.join("")},_tplRowPrefix:'<div id="{0}" class="{1}" onmouseover="{2}" onmouseout="{3}" onclick="{4}">',_getBodyCellId:function(t,e){return this.__getId("cell")+t+"_"+e},_getRowHtml:function(t,e){var i,n,s,a,o,r,l,u,d,h,c,_=this,g=[],p=_.__getClass("cell"),f=_.__getClass("cell-break"),m=_.__getClass("cell-text"),v=_._fields,b=v.length,y=_.subrow&&"false"!=_.subrow;for(g.push(esui.util.format(_._tplRowPrefix,_.__getId("row")+e,_.__getClass("row")+" "+_.__getClass("row-"+(e%2?"odd":"even")),_.__getStrCall("_rowOverHandler",e),_.__getStrCall("_rowOutHandler",e),"line"==_.selectMode?_.__getStrCall("_rowClickHandler",e):""),esui.util.format(_._tplTablePrefix,"100%",_.id)),c=0;b>c;c++)s=[p],a=[m],h=v[c],n=h.content,i=_._colsWidth[c],r=y&&h.subEntry,d=_.editable&&h.editable&&h.edittype,(esui.Table.BREAK_LINE||_.breakLine||h.breakLine)&&s.push(f),d&&a.push(_.__getClass("cell-editable")),h.select&&a.push(_.__getClass("cell-sel")),h.align&&s.push(_.__getClass("cell-align-"+h.align)),o="",h.field&&h.field==_.orderBy&&s.push(_.__getClass("cell-sorted")),u='<div class="'+a.join(" ")+'">'+("function"==typeof n?n.call(_,t,e,c):t[n])+_._getEditEntryHtml(h,e,c)+"</div>",l="&nbsp;",r&&(("function"!=typeof h.isSubEntryShow||h.isSubEntryShow.call(_,t,e,c)!==!1)&&(l=_._getSubEntryHtml(e)),s.push(_.__getClass("subentryfield")),u='<table width="100%" collpadding="0" collspacing="0"><tr><td width="'+_.subEntryWidth+'" align="right">'+l+"</td><td>"+u+"</td></tr></table>"),g.push('<td id="'+_._getBodyCellId(e,c)+'"','class="'+s.join(" ")+'"',' style="width:'+(i+_.rowWidthOffset)+"px;",i?"":"display:none",'" controlTable="'+_.id,'" row="'+e+'" col="'+c+'">',u,"</td>");return g.push("</tr></table></div>"),y&&g.push(_._getSubrowHtml(e)),g.join("")},_getEditEntryHtml:function(t,e,i){var n=t.edittype;return this.editable&&t.editable&&n?'<div class="'+this.__getClass("cell-editentry")+'" onclick="'+this.__getStrCall("startEdit",n,e,i)+'"></div>':""},_rowOverHandler:function(t){if(!this._isDraging){var e=this._getRow(t);e&&baidu.addClass(e,this.__getClass("row-hover"))}},_rowOutHandler:function(t){var e=this._getRow(t);e&&baidu.removeClass(e,this.__getClass("row-hover"))},preventLineSelect:function(){this._dontSelectLine=1},_rowClickHandler:function(t){if("line"==this.selectMode){if(this._dontSelectLine)return this._dontSelectLine=!1,void 0;var e;switch(this.select){case"multi":e=baidu.g(this.__getId("multiSelect")+t),esui.util.hasValue(this._preSelectIndex)||(e.checked=!e.checked),this._selectMulti(t),this._preSelectIndex=null;break;case"single":e=baidu.g(this.__getId("singleSelect")+t),e.checked=!0,this._selectSingle(t)}}},tplSubEntry:'<div class="{0}" onmouseover="{2}" onmouseout="{3}" onclick="{4}" id="{1}" title="{5}"></div>',_getSubEntryHtml:function(t){var e=this;return esui.util.format(e.tplSubEntry,e.__getClass("subentry"),e._getSubentryId(t),e.__getStrCall("_entryOver",t),e.__getStrCall("_entryOut",t),e.__getStrCall("fireSubrow",t),e.subEntryOpenTip)},_getSubrowHtml:function(t){return'<div id="'+this._getSubrowId(t)+'" class="'+this.__getClass("subrow")+'"'+' style="display:none"></div>'},getSubrow:function(t){return baidu.g(this._getSubrowId(t))},_getSubrowId:function(t){return this.__getId("subrow")+t},_getSubentryId:function(t){return this.__getId("subentry")+t},_entryOver:function(t){var e=baidu.g(this._getSubentryId(t)),i=/subentry-opened/.test(e.className),n="subentry-hover";i&&(n="subentry-opened-hover"),baidu.addClass(e,this.__getClass(n))},_entryOut:function(t){var e=this._getSubentryId(t);baidu.removeClass(e,this.__getClass("subentry-hover")),baidu.removeClass(e,this.__getClass("subentry-opened-hover"))},fireSubrow:function(t){var e,i=this,n=i._getSubentryId(t),s=i.datasource,a=s instanceof Array&&s.length;!a||t>=a||(baidu.g(n).getAttribute("data-subrowopened")?i._closeSubrow(t):(e=s[t],i.onsubrowopen(t,e)!==!1&&i.openSubrow(t)),i._entryOver(t))},_closeSubrow:function(t){var e=this,i=baidu.g(e._getSubentryId(t));return e.onsubrowclose(t,e.datasource[t])!==!1?(e._entryOut(t),e._subrowIndex=null,baidu.removeClass(i,e.__getClass("subentry-opened")),baidu.removeClass(e._getRow(t),e.__getClass("row-unfolded")),i.setAttribute("title",e.subEntryOpenTip),i.setAttribute("data-subrowopened",""),baidu.hide(e._getSubrowId(t)),!0):!1},onsubrowopen:new Function,onsubrowclose:new Function,openSubrow:function(t){var e=this,i=e._subrowIndex,n=baidu.g(e._getSubentryId(t)),s=1;esui.util.hasValue(i)&&(s=e._closeSubrow(i)),s&&(baidu.addClass(n,e.__getClass("subentry-opened")),baidu.addClass(e._getRow(t),e.__getClass("row-unfolded")),n.setAttribute("title",e.subEntryCloseTip),n.setAttribute("data-subrowopened","1"),baidu.show(e._getSubrowId(t)),e.subrowMutex&&(e._subrowIndex=t))},_initResizeHandler:function(){var t=this;t.viewWidth=baidu.page.getViewWidth(),t.viewHeight=baidu.page.getViewHeight(),t._resizeHandler=function(){var e=baidu.page.getViewWidth(),i=baidu.page.getViewHeight();(e!=t.viewWidth||i!=t.viewHeight)&&(t.viewWidth=e,t.viewHeight=i,t._handleResize())},baidu.on(window,"resize",t._resizeHandler)},_handleResize:function(){var t,e,i,n=this,s=n.getHead(),a=n.getFoot();if(n._width=n._getWidth(),e=n._width+"px",n.main.style.width=e,n.getBody().style.width=e,s&&(s.style.width=e),a&&(a.style.width=e),n._initColsWidth(),n._resetColumns(),n.followHead)for(t=n.main.parentNode.firstChild,i=0;t;)1==t.nodeType&&t.getAttribute("followThead")&&(t.style.width=n._width-n._followWidthArr[i++]+"px"),t=t.nextSibling;n._topReseter&&n._topReseter()},_initTopResetHandler:function(){if(this.followHead){var t,e,i=this,n=(i.main.parentNode.firstChild,i.getHead()),s=i._followWidthArr,a=i.__getId("TopPlaceholder"),o=document.createElement("div");for(o.id=a,o.style.width="100%",o.style.display="none",baidu.dom.insertBefore(o,i.main),o=null,t=0,e=i._followDoms.length;e>t;t++)i._followDoms[t].style.width=i._width-s[t]+"px";n&&(n.style.width=i._width+"px"),i._topReseter=function(){function t(t,e,i){t&&(t.style.top=i+"px",t.style.position=e)}var e=baidu.page.getScrollTop(),s=i._followHeightArr,o=s.length,r="",l=i._followDoms,u=l.length,d=baidu.g(a),h=0;if(baidu.ie&&baidu.ie<7)if(e>i._followTop){for(r="absolute",d.style.height=s[o-1]+n.offsetHeight+"px",d.style.display="";u>h;h++)t(l[h],r,s[h]+e);t(n,r,s[o-1]+e)}else{for(d.style.height=0,d.style.display="none",r="";u>h;h++)t(l[h],r,0);t(n,r,0)}else if(e>i._followTop){for(d.style.height=s[o-1]+n.offsetHeight+"px",d.style.display="",r="fixed";u>h;h++)t(l[h],r,s[h]);t(n,r,s[o-1])}else{for(d.style.height=0,d.style.display="none",r="";u>h;h++)t(l[h],r,0);t(n,r,0)}},baidu.on(window,"scroll",i._topReseter)}},_resetColumns:function(){var t,e,i,n,s,a,o,r=this,l=r.datasource||[],u=r._colsWidth,d=r.foot,h=r.id,c=d instanceof Array&&d.length,_=(l.length,r.getBody().getElementsByTagName("td")),g=(r.main.getElementsByTagName("table"),_.length);if(c)for(s=0,i=0;c>i;i++){for(a=d[i],e=u[s],o=a.colspan||1,n=1;o>n;n++)e+=u[s+n];s+=o,t=baidu.g(r._getFootCellId(i)),e=Math.max(e+r.rowWidthOffset,0),t.style.width=e+"px",t.style.display=e?"":"none"}if(c=u.length,!r.noHead)for(i=0;c>i;i++)e=Math.max(u[i]+r.rowWidthOffset,0),t=baidu.g(r._getTitleCellId(i)),t.style.width=e+"px",t.style.display=e?"":"none";for(n=0,i=0;g>i;i++)t=_[i],t.getAttribute("controlTable")==h&&(e=Math.max(u[n%c]+r.rowWidthOffset,0),t.style.width=e+"px",t.style.display=e?"":"none",n++)
},FIELD_MULTI_SELECT:{width:30,stable:!0,select:!0,title:function(){return'<input type="checkbox" id="'+this.__getId("selectAll")+'" onclick="'+this.__getStrCall("_toggleSelectAll")+'">'},content:function(t,e){return'<input type="checkbox" id="'+this.__getId("multiSelect")+e+'" onclick="'+this.__getStrCall("_rowCheckboxClick",e)+'">'}},FIELD_SINGLE_SELECT:{width:30,stable:!0,title:"&nbsp;",select:!0,content:function(t,e){var i=this.__getId("singleSelect");return'<input type="radio" id="'+i+e+'" name='+i+' onclick="'+this.__getStrCall("_selectSingle",e)+'">'}},_rowCheckboxClick:function(t){"line"!=this.selectMode?this._selectMulti(t):this._preSelectIndex=t},_selectMulti:function(t){for(var e,i,n,s=this,a=s.getBody().getElementsByTagName("input"),o=0,r=0,l=!0,u=a.length,d=s._getHeadCheckbox(),h=[],c=s.__getClass("row-selected"),_=s.__getId("multiSelect"),g=!esui.util.hasValue(t);u>o;o++)if(e=a[o],i=e.id,"checkbox"==e.getAttribute("type")&&i&&i.indexOf(_)>=0){if(g)for(n=e.parentNode;;){if("DIV"==n.tagName&&/^ui-table-row/.test(n.className))break;n=n.parentNode}e.checked?(h.push(r),g&&baidu.addClass(n,c)):(l=!1,g&&baidu.removeClass(n,c)),r++}this.onselect(h),g||(n=s._getRow(t),e=baidu.g(_+t),e.checked?baidu.addClass(n,c):baidu.removeClass(n,c)),d.checked=l},_toggleSelectAll:function(){this._selectAll(this._getHeadCheckbox().checked)},_selectAll:function(t){for(var e,i,n=this.getBody().getElementsByTagName("input"),s=n.length,a=0,o=0,r=[],l=this.__getClass("row-selected"),u=this.__getId("multiSelect");s>a;a++)e=n[a],i=e.id,"checkbox"==e.getAttribute("type")&&i&&i.indexOf(u)>=0&&(n[a].checked=t,t?(r.push(o),baidu.addClass(this._getRow(o),l)):baidu.removeClass(this._getRow(o),l),o++);this.onselect(r)},_selectSingle:function(t){var e=this.__getClass("row-selected"),i=this._selectedIndex;this.onselect(t)&&("number"==typeof i&&baidu.removeClass(this._getRow(i),e),this._selectedIndex=t,baidu.addClass(this._getRow(t),e))},resetHeadStyle:function(){for(var t,e=this.getHead().getElementsByTagName("th"),i=e.length;i--;)t=e[i],baidu.removeClass(t.firstChild,this.__getClass("thcell_sort"))},refreshView:function(){this._caching(),this._handleResize()},onedit:new Function,startEdit:function(t,e,i){if(this.editable){var n=baidu.g(this._getBodyCellId(e,i)),s=-5,a=baidu.dom.getPosition(n),o=this._fields[i];this._currentEditor=esui.Table.EditorManager.startEdit(this,t,{left:a.left+s,top:a.top+s,rowIndex:e,columnIndex:i,field:o,value:this.datasource[e][o.field]})}},stopEdit:function(){this._currentEditor&&(this._currentEditor.stop(),this._currentEditor=null)},setCellText:function(t,e,i,n){n&&(t=baidu.encodeHTML(t)),t+=this._getEditEntryHtml(this._fields[i],e,i),baidu.g(this._getBodyCellId(e,i)).firstChild.innerHTML=t},__dispose:function(){var t=baidu.g(this.__getId("head")),e=baidu.g(this.__getId("dragMark"));t&&(t.onmousemove=null,t.onmousedown=null),this._followDoms=null,this.stopEdit(),e&&document.body.removeChild(e),esui.Control.prototype.__dispose.call(this),this._resizeHandler&&(baidu.un(window,"resize",this._resizeHandler),this._resizeHandler=null),this._topReseter&&(baidu.un(window,"scroll",this._topReseter),this._topReseter=null)}},baidu.inherits(esui.Table,esui.Control),esui.Table.EditorManager=function(){var t={};return{add:function(e,i){t[e]=i},remove:function(e){delete t[e]},startEdit:function(e,i,n){var s=t[i];return s&&s.start(e,n),s}}}(),esui.Table.Editor=function(t){this.type="null";for(var e in t)this[e]=t[e];this.okId="_ctrlTableEditorOk"+this.type,this.cancelId="_ctrlTableEditorCancel"+this.type,this.errorId="_ctrlTableEditorError"+this.type},esui.Table.Editor.OK_TEXT="确定",esui.Table.Editor.CANCEL_TEXT="取消",esui.Table.Editor.prototype={_idPrefix:"__table_editor__",tpl:'<div ui="id:{0};type:Button;skin:em">{2}</div><div ui="id:{1};type:Button;">{3}</div>',init:function(){if(!this._isInit){var t=esui.util.create("Layer",{id:this._idPrefix+this.type,retype:"table-editor ui-table-editor-"+this.type});t.appendTo(),this.layer=t,this.initLayer(),this._isInit=1}},initLayer:function(){this.fillLayer();var t=this.initLayerControl();this.initButton(t)},initLayerControl:function(){return esui.util.init(this.layer.main)},fillLayer:function(t){t=t||[];var e=this.layer.main,i=this.tpl;t.unshift(i,this.okId,this.cancelId,esui.Table.Editor.OK_TEXT,esui.Table.Editor.CANCEL_TEXT,this.errorId),e.innerHTML=esui.util.format.apply(window,t)},initButton:function(t){var e=t[this.okId],i=t[this.cancelId];e.onclick=this.getOkHandler(),i.onclick=this.getCancelHandler(),this.okButton=e,this.cancelButton=i,this.setButtonDisabled(1)},setButtonDisabled:function(t){this.okButton.setDisabled(t),this.cancelButton.setDisabled(t)},getValue:function(){return null},getOkHandler:function(){var t=this;return function(){t.doOk()}},doOk:function(){this.currentTable.onedit(this.getValue(),this.currentOptions,this)!==!1&&this.stop()},getCancelHandler:function(){var t=this;return function(){t.stop()}},stop:function(){this.layer.hide(),this.setButtonDisabled(1)},start:function(t,e){this.init(),this.currentTable=t,this.currentOptions=e;var i=e.left||0,n=e.top||0;this.unsetError(),this.setButtonDisabled(0),this.layer.show(i,n),this.setValue&&this.setValue(e.value,e)},wait:function(){this.setButtonDisabled(1)},restart:function(){this.setButtonDisabled(0)},setError:function(t){var e=baidu.g(this.errorId);e.innerHTML=t,baidu.show(e)},unsetError:function(){baidu.hide(this.errorId)}},esui.Table.EditorManager.add("string",new esui.Table.Editor({type:"string",tpl:'<input type="text" ui="type:TextInput;id:{5}" /><div ui="id:{0};type:Button;skin:em">{2}</div><div ui="id:{1};type:Button;">{3}</div><div id="{4}" class="ui-table-editor-error"></div>',inputId:"_ctrlTableEditorStringInput",initLayer:function(){this.fillLayer([this.inputId]);var t=this.initLayerControl();this.inputCtrl=t[this.inputId],this.inputCtrl.onenter=this.getOkHandler(),this.initButton(t)},setValue:function(t){this.inputCtrl.setValue(t)},getValue:function(){return this.inputCtrl.getValue()}})),esui.Table.EditorManager.add("int",new esui.Table.Editor({type:"int",tpl:'<input type="text" ui="type:TextInput;id:{5}" /><div ui="id:{0};type:Button;skin:em">{2}</div><div ui="id:{1};type:Button;">{3}</div><div id="{4}" class="ui-table-editor-error"></div>',inputId:"_ctrlTableEditorIntInput",initLayer:function(){this.fillLayer([this.inputId]);var t=this.initLayerControl();this.inputCtrl=t[this.inputId],this.inputCtrl.onenter=this.getOkHandler(),this.initButton(t)},setValue:function(t){this.inputCtrl.setValue(t)},getValue:function(){return parseInt(this.inputCtrl.getValue(),10)},getOkHandler:function(){var t=this;return function(){var e=t.inputCtrl.getValue();return/^\d+$/.test(e)?(t.doOk(),void 0):(t.setError("请输入正确的整数，谢谢。"),void 0)}}})),esui.TextLine=function(t){this._type="textline",this._autoState=0,esui.InputControl.call(this,t),this.number=1,this._numberId=this.__getId("number"),this._textId=this.__getId("text"),this._numberInnId=this._numberId+"Word",this.__initOption("height",null,"HEIGHT")},esui.TextLine.HEIGHT=200,esui.TextLine.prototype={render:function(){var t=this;t._isRendered||(esui.InputControl.prototype.render.call(t),t._renderMain(),t._refreshLine(),t._bindEvent(),t._isRendered=1),t.setWidth(t.width),t.setHeight(t.height),t.setValue(t.value)},showNumber:function(){this._numberHidden=!1,baidu.show(this._numberEl),this._resetLineWidth(),this._resetScroll()},hideNumber:function(){this._numberHidden=!0,baidu.hide(this._numberEl),this._resetLineWidth()},setHeight:function(t){this.height=t,t&&(this._numberEl.style.height=this.main.style.height=t+"px",this._controlMap.text.setHeight(t))},setWidth:function(t){this.width=t,t&&(this.main.style.width=t+"px",this._resetLineWidth())},_bindEvent:function(){var t=this,e=t._getTextCtrl();t._lineRefresher=t._getLineRefresher(),t._scrollRefresher=t._getScrollReseter(),e.onchange=t._lineRefresher,e.main.onscroll=t._scrollRefresher,t._numberEl.onscroll=t._getScrollLineReseter()},_getScrollLineReseter:function(){var t=this;return function(){t._resetScrollByLine()}},_getScrollReseter:function(){var t=this;return function(){t._resetScroll()}},_getLineRefresher:function(){var t=this;return function(){t._getTextEl(),t._refreshLine(),"function"==typeof t.onchange&&t.onchange()}},_tpl:'<div id="{0}" class="{2}"><pre style="margin:0;border:0;padding:0;">1</pre></div><span id="{3}" class="{4}" style="left:-10000px;position:absolute;">1</span><textarea ui="type:TextInput;id:{1}"></textarea>',_renderMain:function(){var t,e=this,i=e.main,n=e._numberId,s=e._textId,a=e._numberInnId,o={};o[s]={width:e.width,height:e.height,value:e.value},i.innerHTML=esui.util.format(e._tpl,n,s,e.__getClass("number"),a,e.__getClass("numberinner")),e._controlMap.text=t=esui.util.init(i,o)[s],t.main.onmouseover=null,t.main.onmouseout=null,e._numberEl=baidu.g(n),e._numberEl.style.height=e.height+"px",e._numberInnEl=baidu.g(a)},_refreshLine:function(){var t,e=this,i=[],n=e._getTextCtrl().getValue().split("\n").length;if(n!=e.number){for(e.number=n,t=1;n+1>t;t++)i.push(t);e._numberInnEl.innerHTML=n+1,baidu.ie?e._numberEl.innerHTML=i.join("<br>"):e._numberEl.firstChild.innerHTML=i.join("\n"),e._resetLineWidth()}e._resetScroll()},_resetLineWidth:function(){var t=Math.max(this._numberInnEl.offsetWidth,14),e=t+12,i=this.width-e;this._numberEl.style.width=t+18+"px",this._numberHidden&&(e=0,i=this.width),this._getTextEl().style.left=e+"px",this._getTextCtrl().setWidth(i)},_getTextEl:function(){return this._getTextCtrl().main},_getTextCtrl:function(){return this._controlMap.text},_resetScroll:function(){var t=this;t._numberEl.scrollTop=t._getTextEl().scrollTop},_resetScrollByLine:function(){var t=this;t._getTextEl().scrollTop=t._numberEl.scrollTop},addLines:function(t){var e=this,i=e._controlMap.text,n=t.join("\n"),s=e.getValue();s.lenght>0&&(n=s+"\n"+n),i.setValue(n)},setValue:function(t){var e=this._getTextCtrl();e.setValue(t),this._refreshLine()},getValue:function(){var t=this._getTextCtrl();return baidu.trim(t.getValue().replace(/\r/g,""))},getValueAsArray:function(){var t,e,i=this.getValue().split("\n"),n=i.length,s={},a=[];for(t=0;n>t;t++)e=baidu.trim(i[t]),0===e.length||s[e]||(s[e]=1,a.push(e));return a},__dispose:function(){this._numberInnerEl=null,this._numberId&&(this._numberId.onscroll=null,this._numberId=null);var t=this._getTextCtrl();t&&(t.main.onscroll=null),esui.InputControl.prototype.__dispose.call(this)}},baidu.inherits(esui.TextLine,esui.InputControl),esui.Tip=function(){function t(){a.hide(),o=!1;var t=a.main;t.onmouseover=null,t.onmouseout=null}function e(){r&&(clearTimeout(r),r=null)}function i(t){this._type="tip-entrance",this._autoState=0,esui.Control.call(this,t),this.mode=this.mode||"over",this.hideDelay&&(this.hideDelay=parseInt(this.hideDelay,10)),this.disabled&&this.addState("disabled",1)}function n(t,n){if(n&&t){!l&&i._init(),o&&e(),baidu.g(_).innerHTML=n.content;var r=n.title;r?(baidu.g(d).innerHTML=r,baidu.show(d)):baidu.hide(d);var u,g,p,m,v,b,y,C,w,I,H=n.arrow,M=n.closeButton,T=baidu.dom.getPosition(t),x=T.left,S=T.top,L=t.offsetWidth,E=t.offsetHeight,D=baidu.page.getViewWidth(),O=baidu.page.getViewHeight(),k=baidu.page.getScrollLeft(),A=baidu.page.getScrollTop(),R=a.main,V=esui.util.get(h).main,B=R.offsetWidth,N=R.offsetHeight,F=5,W=0,P=0,j=f;if(esui.util.hasValue(H)||(H=i.ARROW),esui.util.hasValue(M)||(M=i.CLOSE_BUTTON),V.style.display=M?"":"none",H)switch(P=1,H=String(H).toLowerCase(),F=20,W=14,p=x+L-F,m=x+F-B,v=S+E+W,b=S-W-N,y=x+L+F,w=S+E-W,I=S+W-N,C=x-F-B,H){case"tr":u=m,g=v;break;case"tl":u=p,g=v;break;case"bl":u=p,g=b;break;case"br":u=m,g=b;break;case"lt":u=y,g=w;break;case"lb":u=y,g=I;break;case"rb":u=C,g=I;break;case"rt":u=C,g=w;break;default:P=0,F=-F}P||(g=S+E+W,H&&(H="t"),g+N>O+A&&(P=S-W-N)>0&&(g=P,H&&(H="b")),u=x+L+F,H&&(H+="l"),u+B>D+k&&(P=x-F-B)>0&&(u=P,H&&(H=H.substr(0,1)+"r"))),H&&(j+=" "+f+"-"+H),baidu.g(c).className=j,"auto"!=n.mode&&(R.onmouseover=e,R.onmouseout=s(n.hideDelay)),o=!0,a.show(u,g)}}function s(t){return function(){i.hide(t)}}var a,o,r,l,u="__TipLayer",d="__TipLayerTitle",h="__TipLayerClose",c="__TipLayerArrow",_="__TipLayerBody",g="ui-tip-title",p="ui-tip-body",f="ui-tip-arrow";return i.prototype={render:function(){var t=this,e=t.mode,i=t.main,n=t._getDoShow();if(!t._isRendered){switch(esui.Control.prototype.render.call(t),e){case"over":case"click":"over"==e?i.onmouseover=n:(i.onclick=n,i.style.cursor="pointer"),i.onmouseout=t._getOutHandler();break;case"auto":n()}t._isRendered=1}},_getDoShow:function(){var t=this;return function(){if(!t.isDisabled()){var e=t.title,i=t.content;"function"==typeof e&&(e=e.call(t)),"function"==typeof i&&(i=i.call(t)),n(t.main,{title:e,content:i,arrow:t.arrow,hideDelay:t.hideDelay,mode:t.mode})}}},_getOutHandler:function(){var t=this;return function(){i.hide(t.hideDelay)}}},baidu.inherits(i,esui.Control),i.hide=function(e){e=e||i.HIDE_DELAY,r=setTimeout(t,e)},i.HIDE_DELAY=300,i.show=n,i._init=function(){if(!l){l=1,a=esui.util.create("Layer",{id:u,retype:"tip",width:300}),a.appendTo();var e=a.main,i=document.createElement("h3"),n=document.createElement("div"),s=document.createElement("div"),o=esui.util.create("Button",{id:h,skin:"layerclose"});i.id=d,i.className=g,e.appendChild(i),n.id=_,n.className=p,e.appendChild(n),s.id=c,s.className=f,e.appendChild(s),o.appendTo(e),o.onclick=t}},i.ARROW=0,i.CLOSE_BUTTON=0,i}(),baidu.on(window,"load",esui.Tip._init),esui.TreeView=function(t){this._type="treeview",this._autoState=0,esui.Control.call(this,t),this.__initOption("clickExpand",null,"CLICK_EXPAND"),this.__initOption("expandSelected",null,"EXPAND_SELECTED"),this.__initOption("collapsed",null,"COLLAPSED"),this._dataMap={}},esui.TreeView.COLLAPSED=0,esui.TreeView.CLICK_EXPAND=1,esui.TreeView.EXPAND_SELECTED=0,esui.TreeView.prototype={render:function(){var t=this;t._isRendered||(esui.Control.prototype.render.call(t),t.width&&(t.main.style.width=t.width+"px"),t._isRendered=1),t.main.innerHTML=t._getMainHtml()},_getMainHtml:function(){return this._getNodeHtml(this.datasource,!!this.collapsed,0)},_getChildsHtml:function(t,e,i){var n,s,a=this,o=[];for(n=0,s=t.length;s>n;n++)o.push("<li>"+a._getNodeHtml(t[n],e,i+1)+"</li>");return o.join("")},_tplNode:'<div type="{0}" value="{4}" id="{2}" class="{1}" isExpanded="{8}" level="{9}" onclick="{10}" onmouseover="{11}" onmouseout="{12}"><div class="{5}" onclick="{13}">&nbsp;</div><div class="{6}">&nbsp;</div><div class="{7}">{3}</div></div>',_getNodeHtml:function(t,e,i){var n=i;i=this._getLevelTag(i);var s,a,o=this,r=t.type,l=o.getChildren(t),u=l&&l.length>0,d=o.getItemId(t),h=o.__getClass("node-type"),c=o.__getClass("node-icon"),_=o._getNodeClass("node",i),g=o._getNodeClass("children",i),p=o.__getId("node"+d),f=o.getItemHtml(t),m=o.__getStrRef(),v="",b=e;return this._dataMap[d]=t,s=u?"branch":"leaf",_+=" "+o.__getClass("node-"+s),"root"==i&&(b=!1),r&&(h+=" "+o.__getClass("node-type-"+r)),b?u&&(v=' style="display:none";'):_+=" "+o.__getClass("node-expanded"),a=esui.util.format(o._tplNode,s,_,p,f,d,c,h,o.__getClass("node-text"),b?"":"1",n,m+"._nodeClickHandler(this)",m+"._nodeOverHandler(this)",m+"._nodeOutHandler(this)",m+"._iconClickHandler(this)"),u&&(a+=esui.util.format('<ul id="{2}" value="{4}" class="{3}"{1}>{0}</ul>',o.getChildrenHtml(l,e,n),v,o.__getId("children"+d),g,d)),a},_getNodeClass:function(t,e){return this.__getClass(t)+" "+this.__getClass(t+"-"+e)},_getLevelTag:function(t){return t=0===t?"root":"level"+t},_nodeOverHandler:function(t){this.isDisabled()||baidu.addClass(t,this.__getClass("node-hover"))},_nodeOutHandler:function(t){this.isDisabled()||baidu.removeClass(t,this.__getClass("node-hover"))},_iconClickHandler:function(t){if(!this.isDisabled()){var e=t.parentNode;this._toggle(e),this._isPreventClick=1}},_nodeClickHandler:function(t){if(!this.isDisabled()){var e=t.getAttribute("value"),i=this._dataMap[e];this._isPreventClick||this.onchange(e,i)===!1||(this.select(e),this.expandSelected?!t.getAttribute("isExpanded")&&this._expand(t):this.clickExpand&&this._toggle(t)),this._isPreventClick=0}},onchange:new Function,select:function(t){if(this._selected!=t){var e=this.__getClass("node-selected"),i=baidu.g(this.__getId("node"+this._selected));i&&baidu.removeClass(i,e),this._selected=t,baidu.addClass(this.__getId("node"+t),e)}},_toggle:function(t){t.getAttribute("isExpanded")?this._collapse(t):this._expand(t)},_collapse:function(t){var e=t.getAttribute("value");this.oncollapse(e)!==!1&&this.collapse(e)},_expand:function(t){var e=t.getAttribute("value");this.onexpand(e)!==!1&&this.expand(e)},oncollapse:new Function,onexpand:new Function,expand:function(t){var e=baidu.g(this.__getId("node"+t)),i=baidu.g(this.__getId("children"+t));e&&(e.setAttribute("isExpanded","1"),i&&(i.style.display=""),baidu.addClass(e,this.__getClass("node-expanded")))},collapse:function(t){var e=baidu.g(this.__getId("node"+t)),i=baidu.g(this.__getId("children"+t));e&&(e.setAttribute("isExpanded",""),i&&(i.style.display="none"),baidu.removeClass(e,this.__getClass("node-expanded")))},repaintNodeText:function(t){var e=this,i=e.getItemId(t),n=e.getItemHtml(t),s=baidu.g(e.__getId("node"+i));n&&(s.lastChild.innerHTML=n)},repaintNode:function(t){var e=this,i=e.getItemId(t),n=e.getChildren(t),s=baidu.g(e.__getId("node"+i)),a=e.__getId("children"+i),o=baidu.g(a),r=e.__getClass("node-leaf"),l=e.__getClass("node-branch"),u=parseInt(s.getAttribute("level"),10);this.repaintNodeText(t),n instanceof Array&&n.length?(o||(o=document.createElement("ul"),o.id=a,o.style.display=s.getAttribute("isExpanded")?"":"none",o.className=e._getNodeClass("children",this._getLevelTag(u)),s.parentNode.insertBefore(o,s.nextSibling)),o.innerHTML=e.getChildrenHtml(n,1,u),baidu.addClass(s,l),baidu.removeClass(s,r),s.setAttribute("type","branch")):(baidu.removeClass(s,l),baidu.addClass(s,r),s.setAttribute("type","leaf"))},getChildrenHtml:function(t,e,i){return this._getChildsHtml(t,e,i)},getChildren:function(t){return t.children||[]},getItemHtml:function(t){return t.text},getItemId:function(t){return esui.util.hasValue(t.id)?t.id:esui.util.getGUID()}},baidu.inherits(esui.TreeView,esui.Control);